<!DOCTYPE html>
<html lang="en"><!--
 __  __                __                                     __
/\ \/\ \              /\ \             __                    /\ \
\ \ \_\ \   __  __    \_\ \      __   /\_\      __       ___ \ \ \/'\
 \ \  _  \ /\ \/\ \   /'_` \   /'__`\ \/\ \   /'__`\    /'___\\ \ , <
  \ \ \ \ \\ \ \_\ \ /\ \L\ \ /\  __/  \ \ \ /\ \L\.\_ /\ \__/ \ \ \\`\
   \ \_\ \_\\/`____ \\ \___,_\\ \____\ _\ \ \\ \__/.\_\\ \____\ \ \_\ \_\
    \/_/\/_/ `/___/> \\/__,_ / \/____//\ \_\ \\/__/\/_/ \/____/  \/_/\/_/
                /\___/                \ \____/
                \/__/                  \/___/

Powered by Hydejack v9.0.3 <https://hydejack.com/>
-->
















<head>
  






  
    
<!-- Begin Jekyll SEO tag v2.6.1 -->
<title>PUBG Data Analysis | Michael Ting</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="PUBG Data Analysis" />
<meta name="author" content="Michael Ting" />
<meta property="og:locale" content="en" />
<meta name="description" content="Map of all kills across thousands of PUBG games, highlighted by the stage of the game in which the kill occurred." />
<meta property="og:description" content="Map of all kills across thousands of PUBG games, highlighted by the stage of the game in which the kill occurred." />
<link rel="canonical" href="http://gmarini.com/blog/blog/programming/2021-08-01-pubg/" />
<meta property="og:url" content="http://gmarini.com/blog/blog/programming/2021-08-01-pubg/" />
<meta property="og:site_name" content="Michael Ting" />
<meta property="og:image" content="http://gmarini.com/assets/img/projects/pubg_thumbnail.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-08-01T00:00:00-07:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="http://gmarini.com/assets/img/projects/pubg_thumbnail.jpg" />
<meta property="twitter:title" content="PUBG Data Analysis" />
<meta name="twitter:site" content="@qwtel" />
<meta name="twitter:creator" content="@Michael Ting" />
<meta name="google-site-verification" content="kRoh_csFULhK6lxBJwZOxiWYQpvttOkFj0a3lWwQADc" />
<script type="application/ld+json">
{"datePublished":"2021-08-01T00:00:00-07:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://gmarini.com/blog/blog/programming/2021-08-01-pubg/"},"@type":"BlogPosting","description":"Map of all kills across thousands of PUBG games, highlighted by the stage of the game in which the kill occurred.","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://gmarini.com/assets/icons/icon.jpg"},"name":"Michael Ting"},"url":"http://gmarini.com/blog/blog/programming/2021-08-01-pubg/","author":{"@type":"Person","name":"Michael Ting"},"image":"http://gmarini.com/assets/img/projects/pubg_thumbnail.jpg","headline":"PUBG Data Analysis","dateModified":"2021-08-15T21:42:05-07:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  

  
    <meta name="keywords" content="PhD,coding,programming,android,IoT,Ubiquitous,computing,computer,science">
  

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta http-equiv="x-ua-compatible" content="ie=edge">

<meta name="mobile-web-app-capable" content="yes">

<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-title" content="Michael Ting">
<meta name="apple-mobile-web-app-status-bar-style" content="default">

<meta name="application-name" content="Michael Ting">


  <meta name="theme-color" content="rgb(8,46,57)">


<meta name="generator" content="Hydejack v9.0.3" />


<link rel="alternate" href="http://gmarini.com/blog/blog/programming/2020-05-27-ok-zoomer/" hreflang="en">

<link type="application/atom+xml" rel="alternate" href="http://gmarini.com/feed.xml" title="Michael Ting" />


<link rel="shortcut icon"    href="/assets/icons/favicon.ico">
<link rel="apple-touch-icon" href="/assets/icons/icon-192x192.png">

<link rel="manifest" href="/assets/site.webmanifest">


  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">



  <link rel="dns-prefetch" href="https://www.google-analytics.com">


<link rel="preload" href="/assets/img/swipe.svg" as="image" id="_hrefSwipeSVG">

<link rel="dns-prefetch" href="/assets/js/search-worker-9.0.3.js" as="worker" id="_hrefSearch">

  
  <link rel="dns-prefetch" href="/assets/bower_components/katex/dist/katex.min.css" id="_katexPreload">




<link rel="dns-prefetch" href="https://mting314-com.disqus.com" id="_hrefDisqus">


<script>!function(e,t){"use strict";function n(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}e.loadJS=function(e,o){var r=t.createElement("script");r.src=e,o&&n(r,"load",o,{once:!0});var a=t.scripts[0];return a.parentNode.insertBefore(r,a),r},e._loaded=!1,e.loadJSDeferred=function(o,r){function a(){e._loaded=!0,r&&n(c,"load",r,{once:!0});var o=t.scripts[0];o.parentNode.insertBefore(c,o)}var c=t.createElement("script");return c.src=o,e._loaded?a():n(e,"load",a,{once:!0}),c},e.setRel=e.setRelStylesheet=function(e){function o(){this.rel="stylesheet"}n(t.getElementById(e),"load",o,{once:!0})}}(window,document);
!function(a){"use strict";var b=function(b,c,d){function e(a){return h.body?a():void setTimeout(function(){e(a)})}function f(){i.addEventListener&&i.removeEventListener("load",f),i.media=d||"all"}var g,h=a.document,i=h.createElement("link");if(c)g=c;else{var j=(h.body||h.getElementsByTagName("head")[0]).childNodes;g=j[j.length-1]}var k=h.styleSheets;i.rel="stylesheet",i.href=b,i.media="only x",e(function(){g.parentNode.insertBefore(i,c?g:g.nextSibling)});var l=function(a){for(var b=i.href,c=k.length;c--;)if(k[c].href===b)return a();setTimeout(function(){l(a)})};return i.addEventListener&&i.addEventListener("load",f),i.onloadcssdefined=l,l(f),i};"undefined"!=typeof exports?exports.loadCSS=b:a.loadCSS=b}("undefined"!=typeof global?global:this);
!function(a){if(a.loadCSS){var b=loadCSS.relpreload={};if(b.support=function(){try{return a.document.createElement("link").relList.supports("preload")}catch(b){return!1}},b.poly=function(){for(var b=a.document.getElementsByTagName("link"),c=0;c<b.length;c++){var d=b[c];"preload"===d.rel&&"style"===d.getAttribute("as")&&(a.loadCSS(d.href,d,d.getAttribute("media")),d.rel=null)}},!b.support()){b.poly();var c=a.setInterval(b.poly,300);a.addEventListener&&a.addEventListener("load",function(){b.poly(),a.clearInterval(c)}),a.attachEvent&&a.attachEvent("onload",function(){a.clearInterval(c)})}}}(this);
!function(w) {
  w._baseURL = '/';
  w._publicPath = '/assets/js/';
  w._noPushState = false;
  w._noDrawer = false;
  w._noNavbar = false;
  w._noToc = false;
  w._noSearch = false;
}(window);
</script>



<!--[if gt IE 8]><!---->

  




<link rel="stylesheet" href="/assets/css/hydejack-9.0.3.css" id="_stylePreload">
<link rel="stylesheet" href="/assets/icomoon/style.css" id="_iconsPreload">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Slab:700%7CNoto+Sans:400,400i,700,700i&display=swap" id="_fontsPreload">



  <style id="_pageStyle">

html{--accent-color: rgb(79,177,186);--accent-color-transparent:  rgba(79,177,186,0.5);--accent-color-transparent-darkened:  rgba(32,76,80,0.8);--accent-color-faded: rgba(79,177,186,0.5);--accent-color-darkened: #409ba3;--theme-color: rgb(8,46,57);--dark-mode-body-bg: #282f31;--dark-mode-border-color: #343d3f}

</style>


<!--<![endif]-->


<!--
Code used for embedding Gumroad on the Hydejack Site. 
Left here for reference, feel free to delete.
-->



<!-- It's better to but it here as it is loaded BEFORE my-scripts.html -->
<script src="/assets/mting314/js/jquery-3.5.1.min.js"></script>



<link rel="dns-prefetch" href="https://assets.gumroad.com">
<script type="module">
  const ppiData = window._ppiData = fetch('https://hydejack-ppi.qwtel.workers.dev', { mode: 'cors'}).then(res => res.json()).catch(() => ({}));
  const promisify = f => x => new Promise(r => f(x).addEventListener('load', r));
  const loadJS = promisify(window.loadJS);
  {
    let p;
    document.querySelector('hy-push-state').addEventListener('load', () => {
      const io = new IntersectionObserver(async (entries) => {
        if (entries.some(x => x.isIntersecting)) {
          p = p || loadJS('https://gumroad.com/js/gumroad-embed.js');
          const [{ code }] = await Promise.all([ppiData, p]);
          document.querySelectorAll('.gumroad-product-embed').forEach(el => { 
            if (!el.dataset.gumroadParams) {
              el.dataset.gumroadParams = 'offer_code=' + (code || 'qr0tw8m');
            }
          });
          if (!window.GumroadEmbed) {
            await new Promise(function check1(res) {
              if ('createGumroadEmbed' in window) res(window.createGumroadEmbed());
              else setTimeout(() => check1(res), 200);
            });
          }
          await new Promise(function check2(res) {
            if ('GumroadEmbed' in window) res(GumroadEmbed.reload());
            else setTimeout(() => check2(res), 200);
          });
        }
      }, { rootMargin: '1440px' });
      document.querySelectorAll('.gumroad-product-embed').forEach(el => io.observe(el));
    });
  }
  {
    let p;
    document.querySelector('hy-push-state').addEventListener('load', () => {
      const io = new IntersectionObserver(async (entries) => {
        if (entries.some(x => x.isIntersecting)) {
          p = p || loadJS('https://gumroad.com/js/gumroad.js');
          const [{ code }] = await Promise.all([ppiData, p]);
          if (code) {
            document.querySelectorAll('.gumroad-button').forEach(el => { 
              if (!el.href.endsWith(code)) {
                el.href = el.href + '/' + (code || 'qr0tw8m');
              }
            });
          }
          if (!window.GumroadOverlay) {
            await new Promise(function check(res) {
              if ('createGumroadOverlay' in window) res(window.createGumroadOverlay());
              else setTimeout(() => check(res), 200);
            });
          }
        }
      }, { rootMargin: '300px' });
      document.querySelectorAll('.gumroad-button').forEach(el => io.observe(el));
    });
  }
</script>

</head>

<body class="no-break-layout no-large-headings">
  
<script>
  window._sunrise = 9;
  window._sunset =  18;
  window.match_os =  false;
  !function (window, document) {
  var LM = 'light-mode';
  var DM = 'dark-mode';
  var h = new Date().getHours();
  document.body.classList.add(DM); /*Start in dark mode and eventually switch */
  console.log("match_os " + match_os + " time " +h);
  /* if match_os is false, the time has the preference on deciding  which mode */
  if (window.match_os  && 'matchMedia' in window && window.matchMedia('(prefers-color-scheme)')) return;
  var m = h <= window._sunrise || h >= window._sunset  ? DM : LM; 
  var n = m === DM ? LM : DM;
  document.body.classList.add(m);
  document.body.classList.remove(n);
}(window, document);

</script>



<hy-push-state
  id="_pushState"
  replace-selector="#_main"
  link-selector="a[href]:not([href^='/assets/']):not(.external):not(.no-push-state)"
  script-selector="script"
  duration="500"
  hashchange
>
  
  <div id="_navbar" class="navbar fixed-top">
  <div class="content">
    <span class="sr-only">Jump to:</span>
    <div class="nav-btn-bar">
      <a id="_menu" class="nav-btn no-hover" href="#_drawer--opened">
        <span class="sr-only">Navigation</span>
        <span class="icon-menu"></span>
      </a>
      <div class="nav-span"></div>
    </div>
  </div>
</div>
<hr class="sr-only" hidden />

  <main
  id="_main"
  class="content layout-post"
  role="main"
>
  





<article id="post-blog-blog-programming-pubg" class="page post mb6" role="article">
  <header>
    <h1 class="post-title flip-project-title">
      
        PUBG Data Analysis

      
    </h1>

    <div class="post-date">
      
        
        <time datetime="2021-08-01T00:00:00-07:00">01 Aug 2021</time>
      
      
      
      
      
      









in <a href="/blog/blog/" class="flip-title">Blog</a> / <a href="/blog/programming/" class="flip-title">Programming</a>

      











    </div>

    
    
      
        
        
          <div class="lead aspect-ratio sixteen-nine flip-project-img">
            





<img
  
    src="/assets/img/projects/pubg_thumbnail.jpg"
    
    
  
  alt="PUBG Data Analysis"
  
  
  width="864"
  height="486"
  loading="lazy"
/>

          
        </div>
      
      
    

    



  
    <p class="note-sm"   >
      Map of all kills across thousands of PUBG games, highlighted by the stage of the game in which the kill occurred.

    </p>
  


  </header>

  
    <p>I’ve been on the train of analyzing video game data this summer, and recently, I came across another juicy dataset to dig into: <a href="https://www.kaggle.com/skihikingkevin/pubg-match-deaths/">PUBG Match Data</a>.</p>

<h2 id="brief-battle-royale-system-rundown">Brief Battle Royale System Rundown</h2>

<p>Before we move onto actual analysis, I’d like to just explain how PUBG and in general the hot new Battle Royale-style shooters work because it’s there’s a little more interesting structure to it than standard COD-style shooter gamemodes.</p>

<p>Before the idea came to games, Battle Royales were a popular fictional form of arena combat where you force a large number (on the order of 30~100) people in a pit and have them fight to the death, crowning the last one standing as winner.</p>

<p>After becoming popularized by young adult fiction such as Hunger Games and its movies, the Battle Royale format was introduced to video games in the a basic form called Minecraft Survival Games (an imitation of the Hunger Games style of Battle Royale in Minecraft) of all things. What really brought these kinds of video games to the general gamer’s interest though was indeed PUBG.(And then Fortnite to the general human’s interest).</p>

<p>In BR games like PUBG, the basic idea remains essentially the same - fight to the death on a big island until the last one standing wins.</p>

<p>One very important addition to the game’s format that isn’t usually present in the traditional BR format though is what PUBG calls the Blue Gas. In general, video games that have a BR mode will implement a big damaging cloud (or storm, or circle, or gas cloud - goes by a lot of different names due to different representations in variety of games) that starts surrounding the island/arena, and slowly engulfs the play area from the outside in. This ensures that players can’t just “camp” and sit around a single area hiding for the entire game - players have to make their way inside the “safe zone” before the storm can overrun them. This will force the finals players in a smaller and smaller area until they are forced to fight and a winner is declared.</p>

<h2 id="introduction">Introduction</h2>

<p>I’ll be honest, even though I love shooters, Battle Royale-style ones aren’t exactly my cup of tea. Still though, there’s no denying that, especially since they’re so popular nowadays, there’s lots of really interesting data to dive into.</p>

<p>In particular, this dataset focuses quite a bit on kills and deaths, even giving really detailed information like the exact time into the game, exact coordinates of the killed and killer, the weapon used, etc. With that in mind, we’ll be tackling some of the following points in this analysis:</p>
<ul>
  <li>Battle Royales maps tend to have a huge scope with lots of freedom of movement tends might bring out some interesting trends in how far away people are killing each other.</li>
  <li>
    <p>In a similar vein, what happens if you break out that data by weapon? Can we see if certain weapon types are used more in certain areas, and try to see if that makes sense?</p>
  </li>
  <li>
    <p>We have data for two maps, Erangel and Miramar. Even though they look and “feel” different, what quantitatively can we say is different about the maps, and do those trends line up with what we expect?</p>
  </li>
  <li>Finally, which variables in our data are the best predictors of victory?</li>
</ul>

<p>I’ll be cutting out most of the code for this simply because it’s all really boring. Unlike many of my other Python data-y focused blog posts, this is less of a tutorial and more just pure data analysis. Also, if I included it all, this page would be like 100000 lines long, and explaining all the code would take forever. Besides, the more interesting parts will of course be all the pretty graphs. :)</p>

<p>Just for the sake of people who are interested, though, I’ll give a really quick taste of what kinds of information it has.</p>

<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">head</span><span class="p">(</span><span class="n">player_data</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<table class="dataframe">
<caption>A data.table: 6 × 15</caption>
<thead>
	<tr><th scope="col">date</th><th scope="col">game_size</th><th scope="col">match_id</th><th scope="col">match_mode</th><th scope="col">party_size</th><th scope="col">player_assists</th><th scope="col">player_dbno</th><th scope="col">player_dist_ride</th><th scope="col">player_dist_walk</th><th scope="col">player_dmg</th><th scope="col">player_kills</th><th scope="col">player_name</th><th scope="col">player_survive_time</th><th scope="col">team_id</th><th scope="col">team_placement</th></tr>
	<tr><th scope="col">&lt;dttm&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2017-12-26 04:50:36</td><td>29</td><td>2U4GBNA0Ymm7hRLznO-hY1cg7IUuTgRmE_j5ZAmjWRSDyW8c0ktY2gl203B07Khi</td><td>tpp</td><td>4</td><td>0</td><td>1</td><td>   0.0000</td><td> 326.28390</td><td>100</td><td>1</td><td>Kveni     </td><td> 299.560</td><td> 4</td><td>23</td></tr>
	<tr><td>2017-11-25 13:51:43</td><td>26</td><td>2U4GBNA0Ymlgo3Q_W0NP1Sn02jbanctTudLc-1Fmtu1sJExb7ix9JrDWcXrbipE7</td><td>tpp</td><td>4</td><td>1</td><td>0</td><td>4388.9394</td><td>2618.97632</td><td>148</td><td>1</td><td>WaiMai1422</td><td>1868.700</td><td>14</td><td> 3</td></tr>
	<tr><td>2017-11-19 23:41:05</td><td>28</td><td>2U4GBNA0YmkHBIUqNgaTBjeQooM4Kwg0cRMXSa6oHv4jWZ8NLc5wp8kEdcu4SOs1</td><td>tpp</td><td>4</td><td>1</td><td>6</td><td>5459.1143</td><td>1289.36218</td><td>765</td><td>7</td><td>etonog    </td><td>1113.027</td><td>22</td><td> 6</td></tr>
	<tr><td>2017-11-30 19:41:54</td><td>50</td><td>2U4GBNA0YmnL7_-IUzKaVHrbGoFWzcuRL_bcWyhKfau6R7_WoV3o6IRhsCyRQGN4</td><td>tpp</td><td>2</td><td>0</td><td>0</td><td> 774.7986</td><td>1137.83325</td><td> 95</td><td>1</td><td>Jarci83   </td><td> 855.809</td><td>30</td><td>18</td></tr>
	<tr><td>2017-11-22 16:40:57</td><td>50</td><td>2U4GBNA0YmnyCWAyBg-R5h4Q1AM1Ohfva2oxZsWPlpW7c1jW6TOFHIMHQxQcPMth</td><td>tpp</td><td>2</td><td>0</td><td>0</td><td>   0.0000</td><td>   0.00000</td><td>  0</td><td>0</td><td>chencai7  </td><td> 150.129</td><td> 4</td><td>43</td></tr>
	<tr><td>2017-12-24 01:45:32</td><td>28</td><td>2U4GBNA0YmmQ4u5OyW5efOfnj68BlJJ4lVoZug1fHaf_XY0y6LS_ikNaDg0cMFnu</td><td>tpp</td><td>4</td><td>0</td><td>0</td><td>   0.0000</td><td>  66.64285</td><td>  0</td><td>0</td><td>Jimmy69   </td><td> 146.280</td><td> 4</td><td>19</td></tr>
</tbody>
</table>

<p>This table in the data has every row as a player in a match, and then information on how they did in the match overall, like how many other players killed, how many other players downed, how long they survived, etc.</p>

<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">summary</span><span class="p">(</span><span class="n">player_data</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      date                       game_size        match_id        
 Min.   :2017-10-20 08:04:55   Min.   :  5.00   Length:100000     
 1st Qu.:2017-11-12 03:02:03   1st Qu.: 27.00   Class :character  
 Median :2017-12-03 05:06:54   Median : 43.00   Mode  :character  
 Mean   :2017-12-02 20:19:18   Mean   : 47.15                     
 3rd Qu.:2017-12-25 19:13:18   3rd Qu.: 50.00                     
 Max.   :2018-01-10 12:02:16   Max.   :100.00                     
  match_mode          party_size    player_assists    player_dbno     
 Length:100000      Min.   :1.000   Min.   :0.0000   Min.   : 0.0000  
 Class :character   1st Qu.:2.000   1st Qu.:0.0000   1st Qu.: 0.0000  
 Mode  :character   Median :2.000   Median :0.0000   Median : 0.0000  
                    Mean   :2.732   Mean   :0.2283   Mean   : 0.5843  
                    3rd Qu.:4.000   3rd Qu.:0.0000   3rd Qu.: 1.0000  
                    Max.   :4.000   Max.   :7.0000   Max.   :33.0000  
 player_dist_ride player_dist_walk     player_dmg      player_kills    
 Min.   :     0   Min.   :     0.0   Min.   :   0.0   Min.   : 0.0000  
 1st Qu.:     0   1st Qu.:   212.6   1st Qu.:   0.0   1st Qu.: 0.0000  
 Median :     0   Median :   853.1   Median :  78.0   Median : 0.0000  
 Mean   :  1160   Mean   :  1290.7   Mean   : 123.7   Mean   : 0.8816  
 3rd Qu.:  1888   3rd Qu.:  2055.9   3rd Qu.: 174.0   3rd Qu.: 1.0000  
 Max.   :346355   Max.   :900573.4   Max.   :4451.0   Max.   :44.0000  
 player_name        player_survive_time    team_id       team_placement  
 Length:100000      Min.   :  31.31     Min.   :     1   Min.   :  1.00  
 Class :character   1st Qu.: 249.32     1st Qu.:    11   1st Qu.: 10.00  
 Mode  :character   Median : 654.42     Median :    22   Median : 20.00  
                    Mean   : 787.34     Mean   : 20872   Mean   : 24.44  
                    3rd Qu.:1302.43     3rd Qu.:    44   3rd Qu.: 32.00  
                    Max.   :2197.80     Max.   :100109   Max.   :100.00  
</code></pre></div></div>

<p>That’s actually pretty hilarious, how are there so many outliers for max player kills? Like what the heck was that one game where someone killed 62 people, more than half of everyone on the map?</p>

<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">head</span><span class="p">(</span><span class="n">data2</span><span class="p">)</span><span class="w">
</span><span class="n">summary</span><span class="p">(</span><span class="n">data2</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<table class="dataframe">
<caption>A data.table: 6 × 12</caption>
<thead>
	<tr><th scope="col">killed_by</th><th scope="col">killer_name</th><th scope="col">killer_placement</th><th scope="col">killer_position_x</th><th scope="col">killer_position_y</th><th scope="col">map</th><th scope="col">match_id</th><th scope="col">time</th><th scope="col">victim_name</th><th scope="col">victim_placement</th><th scope="col">victim_position_x</th><th scope="col">victim_position_y</th></tr>
	<tr><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;int&gt;</th><th scope="col">&lt;chr&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th><th scope="col">&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>M16A4   </td><td>Gaven1105 </td><td> 3</td><td>213790.6</td><td>363095.2</td><td>ERANGEL</td><td>2U4GBNA0YmngsHA2y54XOX-LlNxbH1nHKG5Nz3nE4PhYVEY9C2jpf8Y-JUoUWeAS</td><td> 138</td><td>chengrongzhao123</td><td>26</td><td>217531.0</td><td>357371.7</td></tr>
	<tr><td>Mini 14 </td><td>hdhdhyjy  </td><td> 9</td><td>436195.9</td><td>333625.7</td><td>ERANGEL</td><td>2U4GBNA0YmkCqYfgugShflds9a7RXxqBp5hoVW2FbZtPNxWCRVd-AqzDQGownKOD</td><td> 692</td><td>Maxx______      </td><td>28</td><td>423985.3</td><td>338352.5</td></tr>
	<tr><td>S1897   </td><td>Unlucky13 </td><td>26</td><td>431057.8</td><td>635218.4</td><td>ERANGEL</td><td>2U4GBNA0YmnXP9A3dlzYj99a3Otpr8FwId6k5U8svryghayGB5ugPg-FwQ4oXKlT</td><td> 165</td><td>TheJordanator   </td><td>41</td><td>430022.3</td><td>635347.9</td></tr>
	<tr><td>Bluezone</td><td>deermyster</td><td> 5</td><td>     0.0</td><td>     0.0</td><td>ERANGEL</td><td>2U4GBNA0Ymmq5EavUq4NFuERGeqOR8dJ5TgVVS6D0ZX2OCq0X3-Nkvqyse2uYtmO</td><td>1768</td><td>Delmonnico      </td><td> 3</td><td>360923.3</td><td>426063.5</td></tr>
	<tr><td>SKS     </td><td>Anubis_s  </td><td>12</td><td>176436.2</td><td>305802.6</td><td>MIRAMAR</td><td>2U4GBNA0YmmGR3OXB0Zn7pL6sMtmFWkaurWh0IQyTbOsgNMXdHb8PLL6Q_VaX1Dv</td><td> 320</td><td>Wrong2000       </td><td>21</td><td>176429.2</td><td>306296.8</td></tr>
	<tr><td>S686    </td><td>Cloakers  </td><td> 8</td><td>446263.0</td><td>629020.4</td><td>ERANGEL</td><td>2U4GBNA0YmnxnEbhx9iVO5cjqzmOJxIzBuu4I_VPiaihCgDbBcFvXOdqAvhe2Tpb</td><td> 173</td><td>ChenZJiii       </td><td>25</td><td>444676.8</td><td>630663.4</td></tr>
</tbody>
</table>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  killed_by         killer_name        killer_placement killer_position_x
 Length:100000      Length:100000      Min.   : 1.00    Min.   :     0   
 Class :character   Class :character   1st Qu.: 4.00    1st Qu.:335080   
 Mode  :character   Mode  :character   Median :11.00    Median :417872   
                                       Mean   :15.03    Mean   :411802   
                                       3rd Qu.:21.00    3rd Qu.:509687   
                                       Max.   :98.00    Max.   :798985   
                                       NA's   :6942     NA's   :6942     
 killer_position_y     map              match_id              time       
 Min.   :     0    Length:100000      Length:100000      Min.   :  60.0  
 1st Qu.:294299    Class :character   Class :character   1st Qu.: 241.0  
 Median :385943    Mode  :character   Mode  :character   Median : 627.0  
 Mean   :394339                                          Mean   : 763.6  
 3rd Qu.:482537                                          3rd Qu.:1258.0  
 Max.   :777192                                          Max.   :2191.0  
 NA's   :6942                                                            
 victim_name        victim_placement victim_position_x victim_position_y
 Length:100000      Min.   :  1.00   Min.   :     0    Min.   :     0   
 Class :character   1st Qu.: 11.00   1st Qu.:314519    1st Qu.:287605   
 Mode  :character   Median : 20.00   Median :406794    Median :378603   
                    Mean   : 25.38   Mean   :395418    Mean   :378987   
                    3rd Qu.: 33.00   3rd Qu.:499449    3rd Qu.:478445   
                    Max.   :100.00   Max.   :799177    Max.   :795182   
                    NA's   :1989                                        
</code></pre></div></div>

<p>Lol I like how they call it a “victim”. I honestly can’t think of a better work but it’s still pretty funny.</p>

<p>It’s pretty neat to see that there are juuuust around the same number of kill that happened (number of entries in <code class="language-text highlighter-rouge">data2</code>) as there are entries in <code class="language-text highlighter-rouge">data1</code> (each entry there is a player in a match). That would suggest that for every player in every match, there’s one kill, or in other words, people average one kill a match. Does that sounds right?</p>

<h2 id="when-are-people-playing">When are people playing?</h2>

<p>The first feature of this dataset I’d like to tackle might not even be completely related to the gameplay itself - rather, I’ll first be examining <em>when</em> people like to play their games.</p>

<p>I’ll just start with a simple line plot tracking how many games people have played on each day in the range of our dataset (October 2017 ~ January 2018).</p>

<p><img src="/assets/img/blog/pubg_files/real%20r_16_0.png" alt="png" /></p>

<p>For the first couple of months, we seem to have some really nice periodicity. This is really common in online games like League of Legends, where you see fairly large but regular spikes for the weekends.</p>

<p>As a side note, this still seems a bit surprising to me, are there really that many people coming in over the weekends? But as I’ve grown older and become a bit more busy with being, well, an adult, I can more and more see how this would be true…</p>

<p>Either way, we can confirm this trend using a moving average with a 7 day window. This will sort of “smooth out” each week, so that we can compare the average of a one week period to another.</p>

<p><img src="/assets/img/blog/pubg_files/real%20r_18_1.png" alt="png" /></p>

<p>It’s neat that the 7 day moving average works so well to smooth things out, meaning the weekly cycle dynamic we hypothesized is indeed close to reality.</p>

<p>I looked into why there was such a large decline starting around the beginning of December, I originally thought people stop playing games in general around the holidays, but anecdotally and even from looking at data from other games like League, the opposite seems to be true.</p>

<p>No, it actually this was a pretty important period in PUBG’s history specifically: this was around the time it <a href="https://www.businessinsider.com/pubg-playerunknowns-battlegrounds-will-leave-early-access-on-december-20-2017-12#:~:text=PUBG%20Corp.,new%20desert%20map%20called%20Miramar">exited early access officially and also arrived to XBOX One</a>. Perhaps lots of people went to go play the XBOX version (remember this dataset only has PC data).</p>

<p>That was inspecting on the date-level granularity, but what about time of day? Can we see what when are the prime times where people tend to play (online) games?</p>

<p>It’d also be interesting to see how weekends differ from weekdays. I suspect that on weekends people have more time to play earlier in the day.</p>

<p><img src="/assets/img/blog/pubg_files/real%20r_21_0.png" alt="png" /></p>

<p>I was surprised that the main peak seems to be at around 4AM but I think that’s actually just in UTC time. After converting to times in US, this peak would fall sometime between 6PM and 11PM, which is probably the exact prime time for people to be playing games. Considering this game’s playerbase was very much mostly US at the time, this shouldn’t be a huge surprise.</p>

<p>As for the difference between weekends and weekdays, they’re actually not as different as I expected. The biggest difference comes at 22:00 - 24:00, which is around 3-5PM. This also makes a good bit of sense, as this is a good time to play games during the weekend, but people still might be working if it’s a weekday at that time.</p>

<h2 id="death-time-analysis">Death time analysis</h2>

<p>After glancing at some of the columns in our dataset, and now with the basic idea of the game out of the way, we can start to ask some questions about trends in these PUBG matches. First and foremost: when are people dying? We can answer this with the plot:</p>

<p><img src="/assets/img/blog/pubg_files/real%20r_24_2.png" alt="png" /></p>

<p>In this plot, we’re plotting the density of deaths that occur in each second of game time after the match starts. Anyone who’s played any battle royale can quickly see what’s going on here - similar to how it happens in the real Battle Royale/Hunger Games is supposed to go, everyone starts/drops near each other (which is near all the important beginning loot), so lots of fights erupt over this equipment right off the bat.</p>

<p>Then things quickly calm down as squads start to win their engagements, then we hit the lull period. For the squads that survive, this is when they start gathering equipment while keeping their heads down trying to gather equipment for the final confrontation as the storm keeps engulfing the arena.</p>

<p>We can even then take a good guess based on this plot when that final confrontation tends to happen - in that 1500s to 1750s range when we have a tiny little hump in deaths that occur at that time.</p>

<p>What’s neat is that this <a href="http://battlegrounds.party/circle/?preset=Erangel">lines up pretty nicely with when the final circle is revealed</a>. (This source presents data pulled directly from the game’s code. I suppose I shouldn’t be too surprised to see a result like this since the entire design behind the storm is exactly to force these final engagements, but I always find it really neat to actually see the developers’ intentions materialize in a plot like this).</p>

<p>When I came across that really neat “PUBG Circle Stuff” source while writing all of this, I noticed that they allowed you to choose which map you wanted to see statistics for, and that the numbers were indeed different across different maps. Most notably, between the two maps we’re studying here, Miramar actually has it’s circle phase transition times delayed by around 1-2 minutes, probably because it’s a smaller map already.</p>

<p>In fact, this different in circle timings is probably exactly why we see two “mini-peaks” in the overal bumps in deaths near the end of games.</p>

<p><img src="/assets/img/blog/pubg_files/mini_peaks.png" alt="image.png" /></p>

<p>So let’s try breaking the death density plots into each map to see if we can more easily see the difference.</p>

<p><img src="/assets/img/blog/pubg_files/real%20r_28_4.png" alt="png" /></p>

<p><img src="/assets/img/blog/pubg_files/real%20r_28_5.png" alt="png" /></p>

<p>The first and foremost observation to me here was that the two maps’ death time distributions were very similar, almost identical. One tiny detail though I’m still interested in is that Erangel still has those two mini-peaks near the end, while Miramar doesn’t. I thought this might just be noise in the data, but randomly sampling smaller portions still produced those two peaks, meaning its a consistent feature of the dataset. I honestly don’t have a really satisfying answer to this question, but one interesting observation I can point to is that the shrink rate (speed at which radius of final circle decreases) in Erangel is much <em>lower</em> than in Miramar.</p>

<p>My suspicion is that this means that in Erangel, you have some more time for that “final engagement” to play out, so the timing of the final deaths might be a bit more spread out than in Miramar which ends rather quickly.</p>

<p>But now that we have these two separated death density plots, we can observe that the peak death time in Erangel and Miramar occurs at 121 and 122 seconds respectively. We can identify this peak as the point where the all the drop-ins have finished (initial engagements slow down). Then by filtering player coordinates at this point in the game, we can get a good approximation of where players like to choose as their starting location.</p>

<p><img src="/assets/img/blog/pubg_files/erangel_drop_heatmap.png" alt="png" /></p>

<p><img src="/assets/img/blog/pubg_files/miramar_drop_heatmap.png" alt="png" /></p>

<p>Again, not many surprises here. In Erangel, the two most clear hotspots are in the school area and the Sosnovka military base on the little island south of the main island. With the location of the school area and just the nature of the name “military base” you can probably imagine why these are so popular landing spots - not only are there many resources at both the locations (c.f. the cornucopia in the Hunger Games), but the positioning far from the edges of the map where the storm first starts closing in also gives players a big advantage.</p>

<p>Other than those two big hotspots though, we can identify the sort of “secondary” spots on the map, which are simply just other smaller yet still notable locations on the map with a lot of buildings and therefore resources. These include Pochiki, Georgopol, Mylta Power, etc.</p>

<p>The heatmap for Erangel is much more spread out than the fairly concentrated Miramar though. There are again two or three big hotspots, near Pecado and the villa. But other outside of hotspots, there are many areas of the map that are left completely deserted in the beginning of games, mostly in the hilly areas that surround the main roads and locations. This is understandable as landing in the hills is probably disadvantageous being so far from any resources to help you survive all the initial engagements.</p>

<p>Another interesting observation about Miramar is that unlike Erangel, the three main hotspots are all fairly close to each other. In Erangel, the military base and school are a good distance away from each other, especially since you need to cross a bridge to travel between those locations. However, in Miramar, it looks like the map is more more centrally concentrated. I suspect that this is in part due to the larger play area of Miramar. This might sound counterintuitive, but when the map feels larger, players might feel more pressure to start closer to the center.</p>

<p>Another major difference between Erangel and Miramar on the whole that plays into this effect as well is the landscape. In particular, you might be able to tell from the overhead view, but Miramar is much more of a desert-type map, which means much less vegetation to sneak through as you make your way to the center. This again puts pressure on players to not want to move so far because moving along the roads or the hills will make them very exposed.</p>

<p>In fact, this ties into my final observation, which is that Miramar actually does have a military base as well, in the very northeast corner of the map at Campo Militar. However, unlike Sosnovka in Erangel, it seems to be very unpopular for people to land there. I’d suspect that even though this area has some of the best loot on the map and wouldn’t be swarming with players at the beginning of the game, people often don’t find the distance to the center worth it in a map like Miramar for the exact reason I just described above.</p>

<h2 id="where-do-kills-happen-throughout-the-game">Where do kills happen throughout the game?</h2>

<p>Now we can get to my personal favorite part of the analysis I’ve performed so far on this dataset. I found a cool Python package called <a href="https://datashader.org/">Datashader</a>, which does an amazing job at displaying large amounts of geospatial data.</p>

<p><img src="/assets/img/blog/pubg_files/Erangel_kills.jpg" alt="Erangel kills" /></p>

<p>(This isn’t the raw code output, I did a fair amount of preprocessing to make the monster 10MB image into a more managable 1400x1400, and upped the contrast to see the colors better against the black background.)</p>

<p>Just to explain what’s going on here, this is just marking every death on the map, with the color based on how long into the game it took place.</p>

<ul>
  <li>1-10 minutes: Green</li>
  <li>10-25 minutes: Blue</li>
  <li>After 25 minutes: Purple</li>
</ul>

<p>And wow, I absolutely loved just this static image. Isn’t it really cool how clearly the buildings get outlined?</p>

<p>Either way only some discussion.</p>

<ul>
  <li>
    <p>One funny detail, I think that ring of green around the map is people somehow dying like instantly because they forgot to open their parachute? I don’t know, I think it’s just funny that there are enough in the dataset to make such a clear-looking ring.</p>
  </li>
  <li>
    <p>In the early game (green dots), people tend to land and fight for supplies around those major buildings and complexes.</p>
  </li>
  <li>Next, notice all of those light blue areas, where kills were happening in the midgame. It looks like in that period, kills tend to be much more spread across the map, and interestingly in important choke points or roads. The two most notable areas are on the bridges leading to the military base island. So somehow, the bridges are a really important part of how the midgame plays out. Now that I think about it, this actually makes some good sense. The midgame is where people have mostly sorted out their equipment and need to start moving a lot to make it to the more restrictive final circles. This would make major bridges an important.
    <ul>
      <li>You might be inclined to ask then “why are there no other roads covered in blue to the extent of those two bridges”, and I think there’s a pretty simple answer. Those bridges are the <em>only</em> ways on and off of the military base island, whereas there are many routes connecting any two points on the main island. This just means that kills are more spread across different roads on the main island, but the importance and “scarcity” of ways to travel between islands means there’s bound to be more traffic on those bridges.</li>
    </ul>
  </li>
  <li>
    <p>And on subject of midgame kills - there seem to be basically no blue midgame kills happening in those major complexes. This might seem a little strange at first, how are those buildings any different from the ones that do have midgame kills, but anyone who has played the game will know. It’s simply because all those major complexes are already popular drop-in zones as we’ve discussed before, so they’ve already been picked clean. People will have wanted to move on from their starting areas then, so those areas often only see the early fights.</p>
  </li>
  <li>Finally, the purple late-game kills seem to be pretty tightly clustered in small areas, again pretty clear just from how the game works. The circle gets smaller and smaller, so naturally the later fights happen just because people are forced to crash into each other by the shrinking play area.</li>
</ul>

<h2 id="final-circle-location">Final circle location</h2>

<p>We’ve spent some good time analyzing the first engagements of the game, but how about the last? In particular, while the first engagements tell us where people start the game (parachute in), the final engagements could tell us where the final circle ends up located.</p>

<p>Again citing my source that uses official PUBG data, the final circles in these maps last 195 seconds.</p>

<p>According to the official data released by PUBG, the duration of the last two poison circles is 195s. After analyzing the data of the last death time point and pushing back the 195s time period, the corresponding hot spot density map of the location of the death of the character can be simulated. The refresh position preference of the poison circle. Since the death record is relatively small in the last 195s period, in the case of 100,000 samples, the two maps only get 54 and 18 observations respectively, so the sampling ratio is expanded, and 10 million pieces are re-extracted in data set 2 for finalization. Analysis and drawing of the poison circle hotspot map.</p>

<p>After re-sampling, the two maps received 682 and 1101 observations respectively. It can be seen that the total number of battles in the final map of the island map is significantly less than that in the desert map. This analysis may be related to the characteristics of the two maps. In contrast, the topography of the island map is simpler than the desert map, with more flat areas, and can only rely on a few stumps and rocks as shelters, and the risk of death is greater. The desert map as a whole is in the mountains, and there are few flat and open areas with large fluctuations, which is easier for experienced players to survive. In addition, the overall desert map is larger, which means that the average distance of warfare in the later stages of the desert map is greater than that of the island map, which also leads to a decline in mortality. The final poison circle heat map is drawn below:</p>

<p><img src="/assets/img/blog/pubg_files/erangel_final_circle.png" alt="png" /></p>

<p><img src="/assets/img/blog/pubg_files/miramar_final_circle.png" alt="png" /></p>

<p>I honestly don’t know this about PUBG, but the fact that there are basically no outliers here makes me think that there are only a handful (6 or 7) of different preset positions the final ring can be. This makes sense just from a gameplay perspective - developers probably want be able to choose and have control over the interesting final positions on the map. Having you randomly go to a really strange cliffy area where one player could by chance happen to be on top of the cliff would result in a really unfair advantage. Instead, the developers probably chose areas that are relatively flat or have an interesting feature (like being centered around a big building or tower).</p>

<p>There’s not much overlap between popular inital drop locations and the final circles, and I suspect this was again very intentional by the developers. While those areas are very powerful at the beginning of the game, it probably wouldn’t be great for gameplay if people were able to stay there the whole game, so placing the final circles at interesting locations that <em>don’t</em> include the starting ones will make it so that everyone has to react and strategize their positioning at least a little throughout the match.</p>

<p>In fact there’s been some good work done to actually extend this conversation with data I don’t have access to - [this Medium article] uses position data as well as where the circle positions itself throughout a game to provide some pretty convincing evidence that the circle is actually not random, but rather uses machine learning to move the circle around the most “central” team on the map, which forces the most players possible to move.</p>

<p><img src="https://miro.medium.com/max/1050/1*Ez7Ng2ARKB0ORUWEBIHXTg.png" alt="new circle" /></p>

<h2 id="squad-and-map-preference">Squad and Map Preference</h2>
<p>Back to a sort of meta-game analysis, the next columns I’d like to tackle are ones that denote that “game modes” people like to play. In some BR games, you can either go solo and drop in completely alone, or work together with a partner or in a squad to survive. Let’s look at which people tend to prefer.</p>

<p><img src="/assets/img/blog/pubg_files/real%20r_47_1.png" alt="png" /></p>

<p><img src="/assets/img/blog/pubg_files/real%20r_47_2.png" alt="png" /></p>

<p>It can be seen that the single-player frequency is the least, and the four-person team has the most frequent frequency, which is more than twice that of the single player. This shows that most players tend to team up, indicating that the team’s combat playability and game fun are stronger, and may also be Some players socialize through the game, which increases the frequency of team games.</p>

<p>Again, if you’ve played the game, this should be unsurprising. For the squad size, in basically any BR game, you have a huge tactical advantage the more people you have because not only can you have teammates revive you if you are downed, but also splitting up to find more loot and scout out enemies becomes much easier. Other than just the advantage though, these games are also just more fun in a team, in both quiet moments and the heat of the battle. One thing people might not be used to in BR games compared to other shooters is that there’s quite a bit more downtime where you’re hiding, looting, or traveling without seeing a single enemy player for a span of 5-10 minutes. These are moments perfect for just general socialization though because you still have something to keep you busy like looting, but can still just talk with friends. This being quite a tactical game too though, being able to call out enemy positions and coordinate engagements is also much more fun in a group, rather than just running around by yourself.</p>

<p>As for the map preference, the only real observation to make here is that Erangel is far far ahead of Miramar. As mentioned before, Miramar tends to be a much more fierce and concentrated map, but in the places outside the center the map in mine and I’ll bet many others’ opinions, the gameplay tends to be very boring. With the terrain being so mountainous outside of just the standard roads with very little cover, few people tend to play there. This means players have a choice between being bored on the barren outskirts of the map and landing in the middle where they are very likely to just die instantly. Erangel as one of the first and more “baseline” maps seems to have this balance down a bit better, meaning it’s more widely appealing. Of course, that’s not to say Miramar is a bad map, it’s just an offshoot of the standard PUBG experience I bet most players expect when they start playing.</p>

<h2 id="guns">Guns</h2>

<p>Now for the fun part: weapon analysis. In particular, this is where we get to combine two of the most interesting statistics in our dataset in my opinion: location of kills data, and weapons data.</p>

<p>There are tons of different weapons and ways to die in this game, but I exclusively want to focus on guns. Furthermore, there are some really niche guns that aren’t used very often or are exclusive to certain maps (e.g. the G36C is only found on Vikendi), so I’ll be handpicking the weapons I think are most commonly used on Erangel and Miramar.</p>

<p>To get a basic idea of these most popular weapons used, let’s just look at a basic bar chart of usage for each gun.</p>

<p><img src="/assets/img/blog/pubg_files/real%20r_51_1.png" alt="png" /></p>

<p>Unsuprising, the top 4 guns are all assault rifles, and they lead by quite the margin. This tends to be the case in not just BR games, but a general trend in shooters - assault rifles are designed to be the “jack of all trades” weapons, and that flexibility makes them a popular default weapon choice for most players.</p>

<p>It was neat to see UMP9, an SMG, this high on the list - it’s a weapon that’s sort of designed to be an SMG+AR hybrid (high damage and moderate fire rate compared to other SMGs), so maybe the fact that it behaves in many ways like an SMG means that it is also a popular general weapon choice in many engagements.</p>

<p>And now, we can integrate the position data that we have by calculating distance between kills for each weapon. Unlike many shooters, BR games have often huge maps with potential for very long distance engagements, so there might be some more interesting trends to see here.</p>

<p>We’ll break the boxplots into weapon classes of:</p>
<ul>
  <li>Rifles: Jack of all trade automatic weapons, most common</li>
  <li>Pistols: Sidearms with good handling but low firepower and range</li>
  <li>Shotguns: Single shot close range guns</li>
  <li>Sniper Rifles: Precision single shot guns, can hit from across the map</li>
  <li>DMRs: Designated Marksman Rifles, sit between assault rifles and sniper rifles in terms of damage and fire rate</li>
  <li>LMGs: Light Machine Guns, fully automatic and giant clip sizes, meant to spray and supress enemies</li>
  <li>SMGs: Submachine guns, high rate of fire and good handling, but worse range than rifles</li>
</ul>

<p><img src="/assets/img/blog/pubg_files/real%20r_54_0.png" alt="png" /></p>

<p>Awesome! There are already so many observations we can make with this kind of graph.</p>

<p>First and foremost, one can see the basic differences in kill distance by weapon class. Unsurprisingly, pistols, shotguns, and SMGs all have very low kill distances, then rifles are a little further out, then DMRs, and finally sniper rifles.</p>

<p>It’s funny that there are so many outliers and seemingly impossible distances. How the heck are people getting pistol kills at sniper-level distances? I’d like to see some of those…</p>

<p>Speaking of outliers, rifles have a pretty consistent amount of outliers going all the way out to 1 kilometer! That at least makes a little more sense than pistols getting kills at that distance, but I find it interesting that</p>

<p>Now we can start to look <em>within</em> each weapon class. Starting with the DMRs, one very clear outlier was the Win94 unique level action rifle. Even though it actually does have a lower firerate than some of the other semi-auto DMRs (Win94 has a longer wait between shots), people seem to get kills with it from very close distances only. This is possibly due to the very low base scope magnification as well as the fact that you can’t attach new scopes to it, meaning that long distance shots become much of a challenge. As a weapon goes though, that’s probably intended for a weapon like this - DMRs in general are meant to give more precision and damage at long ranges than rifles, even if it comes at the cost of fire rate and close range firepower. Even though this weapon fires one-by-one like the “real” sniper rifles, it feels much more like a DMR with it’s effective ranges.</p>

<p>Finally, notice the sniper rifles have the tallest rectangles, which means that those have the highest variance in kill distance. Because sniper rifles are such precision weapons that as long as you have good aim can hit anything at pretty much any distance up to even a kilometer away, this shouldn’t be too surprising. But speaking of the variance of kill distances for each weapon, let’s dig a little deeper into that by looking at another view of the kill distances: density plots.</p>

<p><img src="/assets/img/blog/pubg_files/real%20r_56_0.png" alt="png" /></p>

<p><img src="/assets/img/blog/pubg_files/real%20r_57_1.png" alt="png" /></p>

<p><img src="/assets/img/blog/pubg_files/real%20r_57_2.png" alt="png" /></p>

<p>The top density plot displays “short” range weapons (SMGs, pistols, shotguns), while the bottom plot displays long range weapons (DMRs and snipers), with rifles as the middle ground as a reference for each.</p>

<p>In the short range plot, I was surprised to see all weapons have such a definitive peak, all at more or less the exact same range of around 300 cm = 3 meters. If you think about it though, 3 meters is around the average size of a normal room, so it wouldn’t be surprising if this is a result of engagements that often occur as someone enters a room hoping to burst someone down in close quarters with an SMG or shotgun.</p>

<p>While these curves all have the same general shape though and rate of tapering off at longer distances, it’s also cool to note that pistols and shotguns actually have almost identical profiles. I honestly couldn’t exactly tell you why, but in general both are used at almost the exact same ranges/situations, namely in small cramped rooms when people are need to switch to a sidearm if they run out of ammo or just aren’t using a primary weapon well suitable to indoor close quarters (like an AUG or DMR).</p>

<p>And as for the long range plot, as we noted in the previous figure, the sniper had a much more variable range, as there is no “one single” range where it’s good. This results in the blue plot looking much flatter than the other plots. Finally, DMRs seemed to have a small bump at the standard rifle range. I originally thought that this was just the shorter-ranged Win94 that we discussed in the previous boxplot, but it looks like all DMRs have this bump.</p>

<p><img src="/assets/img/blog/pubg_files/real%20r_60_1.png" alt="png" /></p>

<p><img src="/assets/img/blog/pubg_files/real%20r_62_1.png" alt="png" /></p>

<p>I originally thought that this range was around the same as the sweet spot for the rest of the rifles, pistols, etc, but turns out the peak for DMRs is a good amount past the rifle peak.</p>

<p>So I’m suspecting the main phenomenon is that this is just showing the “sweet” spot for DMRs, where as I was saying earlier, DMRs get their change to outrange the standard rifle users. Not only is it easier to get kills there, but there’s almost definitely some sort of survivorship and/or selection bias as well - since people indeed understand that this is where DMRs shine, people are likely to just put away their DMRs at very close range in favor of pistols/SMGs, or at very long ranges, just not run away as DMRs start face disadvantages against snipers.</p>

<p>We’ve now examined from how <em>far</em> people kill each other with different weapons, but we can apply our previous methods of plotting positions over the satellite images of each map to see <em>where</em> these kills are actually happening.</p>

<table>
  <thead>
    <tr>
      <th><img src="/assets/img/blog/pubg_files/pistol_erangel.png" alt="png" /></th>
      <th><img src="/assets/img/blog/pubg_files/shotgun_erangel.png" alt="png" /></th>
      <th><img src="/assets/img/blog/pubg_files/smg_erangel.png" alt="png" /></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><img src="/assets/img/blog/pubg_files/rifle_erangel.png" alt="png" /></td>
      <td><img src="/assets/img/blog/pubg_files/dmr_erangel.png" alt="png" /></td>
      <td><img src="/assets/img/blog/pubg_files/sniper_erangel.png" alt="png" /></td>
    </tr>
  </tbody>
</table>

<p>Interestingly, one popular place where pistols and shotguns <em>aren’t</em> used is the military base. The military base simply just has higher tier weapons than simple pistols or shotguns, like rifles and snipers. Therefore, people who use those weapons are just at a disadvantage against the people who have looted the better weapons there, meaning it’s unlikely for people to get kills with those lower tier pistols or shotguns.</p>

<p>The plot for submachine guns, particularly in comparison to the plot for rifles, also confirms my previous suspicion of how SMGs are used primarily indoors, and aren’t as effective out in the field like rifles still tend to be. While other weapons tend to be clustered in buildings where you can easily burst someone down with automatic or shotgun fire, sniper rifles suffer in that kind of close quarters combat, so that’s why we see the sniper rifle map “spread out” from the clustered buildings to throughout the rest of the map.</p>

<p>Again, I hypothesize that this is because snipers can be used anywhere naturally beause of the ability to hit targets from basically any range, esepcially in Erangel where there are pretty nice sightlines. (Also I haven’t mentioned that supply points with snipers are, probably very intentionally, spread out in the map much more than other weapons).</p>

<p>Finally, we’ve discussed how DMRs have a closer profile to rifles than sniper rifles, so that’s contributing to the similarity in the DMR and rifle maps.</p>

<table>
  <thead>
    <tr>
      <th><img src="/assets/img/blog/pubg_files/pistol_miramar.png" alt="png" /></th>
      <th><img src="/assets/img/blog/pubg_files/shotgun_miramar.png" alt="png" /></th>
      <th><img src="/assets/img/blog/pubg_files/smg_miramar.png" alt="png" /></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><img src="/assets/img/blog/pubg_files/rifle_miramar.png" alt="png" /></td>
      <td><img src="/assets/img/blog/pubg_files/dmr_miramar.png" alt="png" /></td>
      <td><img src="/assets/img/blog/pubg_files/sniper_miramar.png" alt="png" /></td>
    </tr>
  </tbody>
</table>

<p>Things change a little when we go to Miramar. Pistols seem to be much more widespread and less clustered than in Erangel. This is probably because resources tend to be more scarce and of lower quality in Miramar, so people have to rely on pistols in more areas instead of being able to immediately upgrade their weapons.</p>

<p>The map designers probably very intentionally put in more snipers and less SMGs and shotguns to play to the map’s strengths: long distance combat across mountainous terrain. Being stuck with those close range weapons would probably suck in a map like this where so many mid to late game battles tend to turn into sniper wars.</p>

<h2 id="objective-survive">Objective: Survive</h2>

<p>We already looked at when exactly deaths occur throughout the game, but we can do a bit deeper analysis here. In particular, there’s a cool R package called <code class="language-text highlighter-rouge">survival</code>, which gives can exactly plot how likely you are to survive as the game goes on. With this, we can not only see if there are any points in the game where your survival tends to plummet (maybe like the drop in phase of the game), but even see how these survival curves may differ for different “categories” of players.</p>

<h3 id="squad-size">Squad size</h3>

<p>I started by wondering if we could see any tangible difference between survival rates for players in squads vs solo.</p>

<p><img src="/assets/img/blog/pubg_files/real%20r_71_0.png" alt="png" /></p>

<p>And wow, that’s pretty tangible. Just to explain what’s going on here a bit, the main 3 curves in RGB represent how likely you are to survive at a certain time into the game. That’s why all the lines are at 100% chance of survival for the first minute or so (when players are all jumping out of the plane, no one can kill each other), and declines to basically 0 over the course of the 30 minute game. (Only 1% or so of players survive the entire game, so that makes sense).</p>

<p>Interestingly, one neat feature of this <code class="language-text highlighter-rouge">survival</code> package is that it’ll draw for us the time when you hit the 50% survival mark, or another way of thinking about it, when you should consider yourself “lucky to be alive”. This is where we can start to see the real difference squad size makes. In particular, we clearly see that it’s neat to see so clearly that the bigger the squad, the longer you tend to survive, with 50% of solo players dying by only around 9.5 minutes into the game, whereas the “half life” of squads goes all the way out to around around 12 minutes.</p>

<p>We’ve discussed this a little bit before, where more cooperation means that you’re have an easier time covering different angles, or scouting, and overall just having a better time surviving. This of couse probably is exact quantitative evidence for the results of those earlier plots where we say people definitely favor larger squad sizes. People want to survive and get that chicken dinner, so teaming with as many people as possible will give you the best chance at that.</p>

<h3 id="driving">Driving</h3>

<p>From the dataset, another easy way to split players is if they had driven or not.</p>

<p><img src="/assets/img/blog/pubg_files/real%20r_74_0.png" alt="png" /></p>

<p>The first and foremost trend to point out here - driving seems to give you a <em>huge</em> boost in survivability, with the blue curve staying way above the red one. However, there are some interesting nuances I’d like to talk through.</p>

<p>I found this one quite funny: it’s important to note that there’s probably a bit of a chicken+egg problem going on here, but I think the difference is stark enough to at least think about for a bit. On one hand, there’s the obvious point that if people just lose their opening gunfights, they of course won’t get a chance to touch a vehicle at all. This is how lower survival would cause less driving.</p>

<p>However, maybe another more interesting trend this plot is capturing is even if you survive the opening drop-in, not getting your hands on a vehicle can spell bad news for your performance in the rest of the game. If you think a bit, it’s pretty clear why this would be the case. Less mobility simply means you’re going to have a harder time getting to those new zones when the circles moves. At walking speed, you have much less flexibility of when to move (many times, you’ll basically have to start moving as soon as the next zone is revealed), and you’re more suseptible to being intercepted or being slowed down by other players.</p>

<p>Of course, other than just median survival rates, the above plots tell us how those rates change as the game progresses. While the “by squad size” plots didn’t vary in shape, these two curves of “with/without driving” have very clearly different shapes as the game goes on. In particular, players who didn’t drive tended to die off quite a bit in the mid-game, but did fine in the late game, while players who did drive died off much more in the end game. Having a vehicle near the beginning or middle of the game then proves to be very benefitial for the reasons we discussed above. However, in the very end of the game when the zones are so small, driving a vehicle is actually disadvantageous because vehicles being loud will tend to just attract enemies.</p>

<p>Therefore, one strategy players can take is simply to keep in remember to get out of their vehicles once the zones become small enough beause we’ve seen that they end up becoming more of a liability when players really should be taking the time to set up positioning for the final fights in those scenarios.</p>

<h2 id="regression-analysis">Regression analysis</h2>

<h1 id="a-little-bit-of-machine-learning-logistic-regression">A little bit of machine learning: Logistic Regression</h1>

<p>And finally, a little bit of machine learning. This is becoming pretty popular nowadays in data analysis for these online games, and for good reason. Once again, we have so much data about basically everything that happens in a game, and so it’s natural to try to exactly which elements have the most correlation with how well you end up doing. I mean, to be honest, I had no idea driving made such a huge impact on how likely you are to survive, so regressions could give us a good way to compare a lot of these different factors.</p>

<p>As a machine learning task now, our target variable in this data is very clear from here: the <code class="language-text highlighter-rouge">team_placement</code> column, which has the final ranking of you or your team.</p>

<p>However, I had limited success when processing this as a continuous variable, taking the target to literally be the number placement you got in the match. I believe this is because there’s way too much variability in people who ended up dying in the initial drop-in, meaning that the bottom 60 rankings are all extremely random and probably have no real correlation.</p>

<p>So I decided to simplify that variable a little bit. We can create a “won” column as a binary variable that just tracks whether someone got 1st place (1) or not (0). This felt a bit strange at first, but to be honest, I think it was a good lesson for me to consider and share - sometimes, a more simplified but straightforward version of the data is the way to go in machine learning because the patterns can become a lot more clear.</p>

<p>Doing this, though, you might spot a bit of an issue - winners probably make up only around 1% of the dataset as there can only be 1 winner (I guess you could have a squad but you get the idea) per match. I didn’t know before this, but this actually has a name: <a href="https://machinelearningmastery.com/what-is-imbalanced-classification/">imbalanced classification</a>. We can make one simple remedy to this though, just take a sample of the losers’ of size equation to the number of winners. Since there are only 2 categories (winners and losers), this is an easy way eo ensure we have the same number of entries in each category.</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Please cite as: 


 Hlavac, Marek (2018). stargazer: Well-Formatted Regression and Summary Statistics Tables.

 R package version 5.2.2. https://CRAN.R-project.org/package=stargazer 
</code></pre></div></div>

<table style="text-align:center"><tr><td colspan="2" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left"></td><td><em>Dependent variable:</em></td></tr>
<tr><td></td><td colspan="1" style="border-bottom: 1px solid black"></td></tr>
<tr><td style="text-align:left"></td><td>victory</td></tr>
<tr><td colspan="2" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left">player_assists</td><td>0.581<sup>***</sup> (0.063)</td></tr>
<tr><td style="text-align:left"></td><td>t = 9.215</td></tr>
<tr><td style="text-align:left"></td><td>p = 0.000</td></tr>
<tr><td style="text-align:left">player_dbno</td><td>0.065 (0.044)</td></tr>
<tr><td style="text-align:left"></td><td>t = 1.489</td></tr>
<tr><td style="text-align:left"></td><td>p = 0.137</td></tr>
<tr><td style="text-align:left">player_dist_ride</td><td>-0.0001<sup>***</sup> (0.00002)</td></tr>
<tr><td style="text-align:left"></td><td>t = -2.919</td></tr>
<tr><td style="text-align:left"></td><td>p = 0.004</td></tr>
<tr><td style="text-align:left">player_dist_walk</td><td>-0.0002<sup>***</sup> (0.00005)</td></tr>
<tr><td style="text-align:left"></td><td>t = -4.541</td></tr>
<tr><td style="text-align:left"></td><td>p = 0.00001</td></tr>
<tr><td style="text-align:left">player_dmg</td><td>-0.002<sup>***</sup> (0.0005)</td></tr>
<tr><td style="text-align:left"></td><td>t = -3.367</td></tr>
<tr><td style="text-align:left"></td><td>p = 0.001</td></tr>
<tr><td style="text-align:left">player_kills</td><td>0.323<sup>***</sup> (0.050)</td></tr>
<tr><td style="text-align:left"></td><td>t = 6.482</td></tr>
<tr><td style="text-align:left"></td><td>p = 0.000</td></tr>
<tr><td style="text-align:left">player_survive_time</td><td>0.005<sup>***</sup> (0.0002)</td></tr>
<tr><td style="text-align:left"></td><td>t = 27.408</td></tr>
<tr><td style="text-align:left"></td><td>p = 0.000</td></tr>
<tr><td style="text-align:left">Constant</td><td>-8.280<sup>***</sup> (0.302)</td></tr>
<tr><td style="text-align:left"></td><td>t = -27.437</td></tr>
<tr><td style="text-align:left"></td><td>p = 0.000</td></tr>
<tr><td colspan="2" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left">Observations</td><td>5,658</td></tr>
<tr><td style="text-align:left">Log Likelihood</td><td>-1,451.806</td></tr>
<tr><td style="text-align:left">Akaike Inf. Crit.</td><td>2,919.611</td></tr>
<tr><td style="text-align:left">Residual Deviance</td><td>2,903.611 (df = 5650)</td></tr>
<tr><td style="text-align:left">Null Deviance</td><td>7,843.653 (df = 5657)</td></tr>
<tr><td colspan="2" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left"><em>Note:</em></td><td style="text-align:right"><sup>*</sup>p&lt;0.1; <sup>**</sup>p&lt;0.05; <sup>***</sup>p&lt;0.01</td></tr>
</table>

<p>Before we move on though, we should check if there’s any multicolinearity in our predictor variables. There’s something great that does this for us in R just called <code class="language-text highlighter-rouge">vif</code>, or Variance Inflation Factor.</p>

<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">car</span><span class="p">)</span><span class="w">

</span><span class="n">cat</span><span class="p">(</span><span class="s2">"vif:\n"</span><span class="p">)</span><span class="w">
</span><span class="n">vif</span><span class="p">(</span><span class="n">fit5</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vif:
</code></pre></div></div>

<p><img src="/assets/img/blog/pubg_files/vif_first.png" alt="first vif" /></p>

<p>(Sorry for the screenshot, the R output is a really strange format that didn’t translate to markdown well.)</p>

<p>It can be seen that the <code class="language-text highlighter-rouge">player_dbno</code> (the number of times the player is knocked down) has not passed the t-test significance test. This is another one of those times where having more data is worse due to <em>multicolinearity</em> (I recommend <a href="https://github.com/PhilChodrow/PIC16A/blob/master/content/ML/ML_7.ipynb">Phil Chodrow’s notes</a> for an explanation), so we should actually try to drop it. And I think this is a good call, if I were implementing this model from scratch, I probably wouldn’t include this. In case you don’t know <code class="language-text highlighter-rouge">player_dbno</code> means the number of players you put into a “down but not out” state, where they are downed, but aren’t dead/out of the game yet, and can be revived by a teammate. However, it’s pretty rare when this happens, usually players are just in a position where they can finish you or the rest of your team off at that point.</p>

<p>In other words, <code class="language-text highlighter-rouge">player_dbno</code> and <code class="language-text highlighter-rouge">player_kills</code> are almost definitely very correlated, meaning this could cause lots of overfitting. Bad.</p>

<p>Luckily, the next step of this package will then automatically filter this out for us.</p>

<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">fit6</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">step</span><span class="p">(</span><span class="n">fit5</span><span class="p">,</span><span class="n">trace</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w">
</span><span class="n">stargazer</span><span class="p">(</span><span class="n">fit6</span><span class="p">,</span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"html"</span><span class="p">,</span><span class="n">style</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"all"</span><span class="p">,</span><span class="n">single.row</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">T</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<table style="text-align:center"><tr><td colspan="2" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left"></td><td><em>Dependent variable:</em></td></tr>
<tr><td></td><td colspan="1" style="border-bottom: 1px solid black"></td></tr>
<tr><td style="text-align:left"></td><td>victory</td></tr>
<tr><td colspan="2" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left">player_assists</td><td>0.581<sup>***</sup> (0.063)</td></tr>
<tr><td style="text-align:left"></td><td>t = 9.215</td></tr>
<tr><td style="text-align:left"></td><td>p = 0.000</td></tr>
<tr><td style="text-align:left">player_dbno</td><td>0.065 (0.044)</td></tr>
<tr><td style="text-align:left"></td><td>t = 1.489</td></tr>
<tr><td style="text-align:left"></td><td>p = 0.137</td></tr>
<tr><td style="text-align:left">player_dist_ride</td><td>-0.0001<sup>***</sup> (0.00002)</td></tr>
<tr><td style="text-align:left"></td><td>t = -2.919</td></tr>
<tr><td style="text-align:left"></td><td>p = 0.004</td></tr>
<tr><td style="text-align:left">player_dist_walk</td><td>-0.0002<sup>***</sup> (0.00005)</td></tr>
<tr><td style="text-align:left"></td><td>t = -4.541</td></tr>
<tr><td style="text-align:left"></td><td>p = 0.00001</td></tr>
<tr><td style="text-align:left">player_dmg</td><td>-0.002<sup>***</sup> (0.0005)</td></tr>
<tr><td style="text-align:left"></td><td>t = -3.367</td></tr>
<tr><td style="text-align:left"></td><td>p = 0.001</td></tr>
<tr><td style="text-align:left">player_kills</td><td>0.323<sup>***</sup> (0.050)</td></tr>
<tr><td style="text-align:left"></td><td>t = 6.482</td></tr>
<tr><td style="text-align:left"></td><td>p = 0.000</td></tr>
<tr><td style="text-align:left">player_survive_time</td><td>0.005<sup>***</sup> (0.0002)</td></tr>
<tr><td style="text-align:left"></td><td>t = 27.408</td></tr>
<tr><td style="text-align:left"></td><td>p = 0.000</td></tr>
<tr><td style="text-align:left">Constant</td><td>-8.280<sup>***</sup> (0.302)</td></tr>
<tr><td style="text-align:left"></td><td>t = -27.437</td></tr>
<tr><td style="text-align:left"></td><td>p = 0.000</td></tr>
<tr><td colspan="2" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left">Observations</td><td>5,658</td></tr>
<tr><td style="text-align:left">Log Likelihood</td><td>-1,451.806</td></tr>
<tr><td style="text-align:left">Akaike Inf. Crit.</td><td>2,919.611</td></tr>
<tr><td style="text-align:left">Residual Deviance</td><td>2,903.611 (df = 5650)</td></tr>
<tr><td style="text-align:left">Null Deviance</td><td>7,843.653 (df = 5657)</td></tr>
<tr><td colspan="2" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left"><em>Note:</em></td><td style="text-align:right"><sup>*</sup>p&lt;0.1; <sup>**</sup>p&lt;0.05; <sup>***</sup>p&lt;0.01</td></tr>
</table>

<div class="language-R highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cat</span><span class="p">(</span><span class="s2">"vif:\n"</span><span class="p">)</span><span class="w">
</span><span class="n">vif</span><span class="p">(</span><span class="n">fit6</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>vif:
</code></pre></div></div>

<p><img src="/assets/img/blog/pubg_files/vif_second.png" alt="second vif" /></p>

<p>We pass the significance test (variables are significantly distinct), so press forwards. This is the final result of the model.</p>

<center>**logit(victory) = log(p(victory=1)/(1-p(victory=1)))**</center>
<center>**&#160;= -7.532 + 4.658X10<sup>-1</sup>player_assists - 5.629X10<sup>-5</sup>player_dist_ride - 1.686X10<sup>-4</sup>player_dist_walk**</center>
<center>**&#160;- 1.743X10<sup>-3</sup>player_dmg + 3.252X10<sup>-1</sup>player_kills + 5.117X10<sup>-3</sup>player_survive_time**</center>

<p>Just to make sure we’re on the same page, this is what each of the variables mean:</p>

<ul>
  <li>victory: Boolean variable, winning or losing</li>
  <li>player_assists: Number of times you revive your teammate</li>
  <li>player_dist_ride: Distance you’ve driven a vehicle</li>
  <li>player_dist_walk: Distance you’ve walked</li>
  <li>player_dmg: Points of damage inflicted to enemy players</li>
  <li>player_kills: Number of kills</li>
  <li>player_survive_time: Amount of time you’ve survived</li>
</ul>

<p>We can now start to break these coefficients down. First, start by noticing the sign. Out of all of these, only kills, assists, and survival time are positively correlated with winning, and the rest are actually negatively correlated. Of course, survival time seems obvious here, and assisting your teammates back up does seem like a good thing to do if you want your team to survive. However, I didn’t realize that kills would be so positively correlated when damage is not. Perhaps this means that people who win are actually better at “focusing” their damage onto single targets to secure kills, while people who don’t win might be having a harder time securing kills and rather just spraying damage everywhere, letting people heal up.</p>

<p>We’ve already discussed the modes of transportation a bit (walking vs driving), but since they appear here, it’s worth talking about a little again. In particular, it looks like both are actually negatively correlated, meaning that people who seem to have to travel more to get to the circles are the “unlucky” ones, and are more likely to get picked off when they’re vulnerable traveling.</p>

<p>Either way, we’re not realy do  how our logistic model is doing and how to implement it in our real testing data. For an explanation of what’s going on here, I again recommend my Python professor, Phil Chodrow’s, series of <a href="https://github.com/PhilChodrow/PIC16A/blob/master/homework/HW6.ipynb">lectures on logistic regression</a> (actually, this one comes from a homework, but they instructions are so well written they might as well be a mini-lecture).</p>

<p><img src="/assets/img/blog/pubg_files/real%20r_92_1.png" alt="png" /></p>

<p>And we see something very good: the area under the ROC curve is 0.955, very close to 1, which means our model is pretty good. This figure also shows us the optimal threshold to use is 0.612.</p>

<p>Now that we have a model it’s time to fit “testing” data, i.e. the whole original unseen portion of the dataset, and see if we’re able to predict winners accurately. Now that we have our threshold value, it’s just a matter of plugging in. (We just have to do the same weird preprocessing of creating the victory labeling).</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   pred
           0        1
  0 12473707   884505
  1    30505   355558



True positive rate = 0.9209844 
False positive rate = 0.06621433 
Accuracy = 0.9334261 
</code></pre></div></div>

<p>And that seems really good, our true positives rate was over 93%, which is to be quite honest, much better than I expected. I thought the computer might get tripped up because I assumed many people in the final fights would have very similar stats, but it seems our model was able to pick out winners really nicely. And the false positives rate was also pretty low too, which is a good sign of no overfitting.</p>

  
</article>






<hr class="dingbat related" />




  
     


  <aside class="about related mt4 mb4" role="complementary">
    
    

<div class="author mt4">
  

  
    





<img
  
    src="/assets/icons/icon.jpg"
    srcset="/assets/icons/icon.jpg 1x,/assets/icons/icon.jpg 2x"
    
  
  alt="Michael Ting"
  class="avatar"
  
  width="120"
  height="120"
  loading="lazy"
/>

  

  
  
  <h2  class="page-title hr-bottom">
    About
  </h2>

  <p>Michael is an Applied Math student at UCLA, but also minoring in Statistics and Asian Languages, with a specialization in computing - just studying anything that seems fun to me. Hoping that one day he’ll able to apply all the math+programming he’s been enjoying working on to help people solve their real-world problems. But most importantly? “I can only use SpeedChat”.</p>


  <div class="sidebar-social">
    <span class="sr-only">Social:</span>
<ul>
  
    
      



  

  
  
  
  

  

  

  <li>
    <a href="https://github.com/mting314" title="GitHub" class="no-mark-external">
      <span class="icon-github"></span>
      <span class="sr-only">GitHub</span>
    </a>
  </li>


    
      



  

  
  
  
  

  

  

  <li>
    <a href="mailto:giaga7@gmail.com" title="Email" class="no-mark-external">
      <span class="icon-mail"></span>
      <span class="sr-only">Email</span>
    </a>
  </li>


    
      



  

  
  
  
  

  

  

  <li>
    <a href="https://play.spotify.com/user/12162364462" title="Spotify" class="no-mark-external">
      <span class="icon-spotify"></span>
      <span class="sr-only">Spotify</span>
    </a>
  </li>


    
      



  

  
  
  
  

  

  

  <li>
    <a href="https://www.linkedin.com/in/michael-ting314" title="LinkedIn" class="no-mark-external">
      <span class="icon-linkedin2"></span>
      <span class="sr-only">LinkedIn</span>
    </a>
  </li>


    
  
</ul>

  </div>
</div>

  </aside>


  

  
    


  

  
    


  <aside class="other-projects related mb0" role="complementary">  <h2>Related Posts</h2>  <div class="columns">          <div class="column column-1-2">                  <article class="project-card">  <a href="/blog/blog/programming/2021-08-05-online-grade-distributions/" class="no-hover no-print-link flip-project" tabindex="-1">    <div class="project-card-img aspect-ratio sixteen-nine flip-project-img">              <img      src="https://takuti.github.io/Recommendation.jl/latest/assets/images/cf.png"        sizes="(min-width: 86em) 31.5rem, (min-width: 54em) 26.5rem, (min-width: 42em) 23.5rem, 48rem"    alt="How Grade Distributions Changed During Online Learning"      width="864"  height="486"  loading="lazy"/>          </div>  </a>  <h3 class="project-card-title flip-project-title">    <a href="/blog/blog/programming/2021-08-05-online-grade-distributions/" class="flip-title">How Grade Distributions Changed During Online Learning</a>  </h3>      <p class="project-card-text fine" property="disambiguatingDescription">      The COVID-19 pandemic changed routines in regard to learning and teaching. How did those changes impact grade distributions?    </p>      <a class="fill-card no-hover" href="/blog/blog/programming/2021-08-05-online-grade-distributions/" tabindex="-1"><span class="sr-only">Continue reading How Grade Distributions Changed During Online Learning</span></a></article>              </div>          <div class="column column-1-2">                  <article class="project-card">  <a href="/blog/blog/programming/2021-06-21-ALS_Explanation/" class="no-hover no-print-link flip-project" tabindex="-1">    <div class="project-card-img aspect-ratio sixteen-nine flip-project-img">              <img      src="https://takuti.github.io/Recommendation.jl/latest/assets/images/cf.png"        sizes="(min-width: 86em) 31.5rem, (min-width: 54em) 26.5rem, (min-width: 42em) 23.5rem, 48rem"    alt="An Anime Recommendation Website! Part 2: ALS From Scratch"      width="864"  height="486"  loading="lazy"/>          </div>  </a>  <h3 class="project-card-title flip-project-title">    <a href="/blog/blog/programming/2021-06-21-ALS_Explanation/" class="flip-title">An Anime Recommendation Website! Part 2: ALS From Scratch</a>  </h3>      <p class="project-card-text fine" property="disambiguatingDescription">      Image credit to https://takuti.github.io/Recommendation.jl/latest/collaborative_filtering/    </p>      <a class="fill-card no-hover" href="/blog/blog/programming/2021-06-21-ALS_Explanation/" tabindex="-1"><span class="sr-only">Continue reading An Anime Recommendation Website! Part 2: ALS From Scratch</span></a></article>              </div>      </div></aside>

  

  
    


  <aside class="related mb4" role="complementary">  <h2 class="hr-bottom">Random Posts</h2>  <ul class="related-posts">          <li class="h4">  <a href="/blog/blog/thoughts/2021-06-10-Spring-21/" class="flip-title"><span>Spring 2021 Summary</span></a>  <time class="faded fine" datetime="2021-06-10T00:00:00-07:00">10 Jun 2021</time></li>          <li class="h4">  <a href="/blog/blog/programming/pic16b/2021-03-29-hw0/" class="flip-title"><span>Homework 0: Penguins</span></a>  <time class="faded fine" datetime="2021-03-29T00:00:00-07:00">29 Mar 2021</time></li>          <li class="h4">  <a href="/blog/blog/thoughts/2021-04-01-Winter-21/" class="flip-title"><span>Winter 2021 Summary</span></a>  <time class="faded fine" datetime="2021-04-01T00:00:00-07:00">01 Apr 2021</time></li>      </ul></aside>

  

  
    

  


  
<footer class="content" role="contentinfo">
  <hr/>
  
    <p><small class="copyright">Michael Ting © 2021. All rights reserved
</small></p>
  
  
    <nav class="legal"><small>
    
      
      <a class="heading flip-title" href="/LICENSE/">LICENSE</a>
      |
    
      
      <a class="heading flip-title" href="/NOTICE/">NOTICE</a>
      |
    
      
      <a class="heading flip-title" href="/CHANGELOG/">CHANGELOG</a>
      
    
    </small></nav>
  
  
    <p><small>Powered by <a class="external" href="https://hydejack.com/">Hydejack</a> v<span id="_version">9.0.3</span></small></p>
  
  <hr class="sr-only"/>
</footer>


</main>

  <hy-drawer
  id="_drawer"
  class=""
  side="left"
  threshold="10"
  noscroll
  
>
  <header id="_sidebar" class="sidebar" role="banner">
    






<div class="sidebar-bg " style="background:linear-gradient(202deg, rgb(6 8 29) 13%, rgb(181 181 181) 87%)">

 </div>

    <div class="sidebar-sticky">
  <div class="sidebar-about">
    
      <a class="no-hover" href="/" tabindex="-1">
        <img src="/assets/icons/icon.jpg" class="avatar" alt="Michael Ting" width="120" height="120" loading="lazy" />
      </a>
    
    <a class="sidebar-title" href="/"><h2 class="h1">Michael Ting</h2>
        
      
      <h3 class="faded"> SpeedChat Enjoyer </h3>
    
    </a>
    

    
      <p class="">
        Undergraduate Student in Applied Mathematics at UCLA

      </p>
    
  </div>

  <nav class="sidebar-nav heading" role="navigation">
    <span class="sr-only">Navigation:</span>
<ul>
  
    
      
      <li>
        <a
          id="_drawer--opened"
          href="/about"
          class="sidebar-nav-item"
          
        >
          About
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/blog"
          class="sidebar-nav-item"
          
        >
          Blog
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/resume/"
          class="sidebar-nav-item"
          
        >
          Résumé\CV
        </a>
      </li>
    
      
      <li>
        <a
          
          href="/projects/"
          class="sidebar-nav-item"
          
        >
          Projects
        </a>
      </li>
    
  
</ul>

  </nav>

  
  <div class="sidebar-social">
    <span class="sr-only">Social:</span>
<ul>
  
    
      



  

  
  
  
  

  

  

  <li>
    <a href="https://github.com/mting314" title="GitHub" class="no-mark-external">
      <span class="icon-github"></span>
      <span class="sr-only">GitHub</span>
    </a>
  </li>


    
      



  

  
  
  
  

  

  

  <li>
    <a href="mailto:giaga7@gmail.com" title="Email" class="no-mark-external">
      <span class="icon-mail"></span>
      <span class="sr-only">Email</span>
    </a>
  </li>


    
      



  

  
  
  
  

  

  

  <li>
    <a href="https://play.spotify.com/user/12162364462" title="Spotify" class="no-mark-external">
      <span class="icon-spotify"></span>
      <span class="sr-only">Spotify</span>
    </a>
  </li>


    
      



  

  
  
  
  

  

  

  <li>
    <a href="https://www.linkedin.com/in/michael-ting314" title="LinkedIn" class="no-mark-external">
      <span class="icon-linkedin2"></span>
      <span class="sr-only">LinkedIn</span>
    </a>
  </li>


    
  
</ul>

  </div>
</div>
  </header>
</hy-drawer>
<hr class="sr-only" hidden />

</hy-push-state>


  <!--[if gt IE 10]><!---->
  <script nomodule>!function(){var e=document.createElement("script");if(!("noModule"in e)&&"onbeforeload"in e){var t=!1;document.addEventListener("beforeload",function(n){if(n.target===e)t=!0;else if(!n.target.hasAttribute("nomodule")||!t)return;n.preventDefault()},!0),e.type="module",e.src=".",document.head.appendChild(e),e.remove()}}();
</script>
  <script src="/assets/js/hydejack-9.0.3.js" type="module"></script>
  <script src="/assets/js/LEGACY-hydejack-9.0.3.js" nomodule defer></script>
  <!-- I gotta add this here or the javascript will NOT load when dynamic page reloading is disabled
typewriter.js and the code below are not that big so it should not be much of an issue in page loading speed. Especially with jekyll -->

<script src="/assets/mting314/js/jquery-3.5.1.min.js"></script>
<script src="/assets/mting314/js/typewriter.js"></script>
<script src="/assets/mting314/js/particles.min.js"></script> 
<script>
function appendLeadingZeroes(n){
    if(n <= 9){
      return "0" + n;
    };
    return n;
  };
  function strip(html){
    var doc = new DOMParser().parseFromString(html, 'text/html');
    return doc.body.textContent || "";
  };

  function getRandomSubarray(arr, size) {
    var shuffled = arr.slice(0), i = arr.length, temp, index;
    while (i--) {
        index = Math.floor((i + 1) * Math.random());
        temp = shuffled[index];
        shuffled[index] = shuffled[i];
        shuffled[i] = temp;
    }
    return shuffled.slice(0, size);
}

var blogTyperStarted = false;
var startBlogTyper = function(typingWindow){
  blogTyperStarted = true;
  var typingWindow = document.getElementsByClassName('typing-window blog')[0];  

  if(!typingWindow){
    return;
  };
  var typingWindowWrapper = document.getElementsByClassName('typing-window-wrapper')[0];  
  var app = typingWindow.getElementsByClassName('typing-area')[0];
  var closeBtn =  typingWindow.getElementsByClassName('typing-toolbar-btn close')[0];
  typingWindowWrapper.addEventListener('transitionend', function(event) {
    if(event.target !== event.currentTarget)
      return;
      /* Javascript returns max-height as a string "opx" */
    if (event.propertyName === "max-height" && typingWindowWrapper.style.maxHeight === "0px"){
      typingWindowWrapper.remove();
    }else if(event.propertyName === "opacity" && typingWindowWrapper.style.opacity < 0.1){
      typingWindowWrapper.style.maxHeight = 0;
    };
 });

  setTimeout (function() {
    closeBtn.classList.toggle('disabled');
    closeBtn.onclick = function() {
          typewriter.stop();
          typingWindowWrapper.style.opacity = 0.01;
      };
  }, 10000);
  console.log("Starting blog typer!");



  var totalLoops = 20;
  // var wordList = ["<em>PhD Student</em> 📚", "Programmer 💻", "Photographer 📷", "Pizza Lover 🍕", "Gamer 👾", "Swimmer 🏊", "Traveller 🌏"];
  const jsonData = {
        "10": "Oh, well.",
        "20": "Why not?",
        "30": "Naturally!",
        "40": "That's the way to do it.",
        "50": "Right on!",
        "60": "What up?",
        "70": "But of course!",
        "80": "Bingo!",
        "90": "You've got to be kidding...",
        "100": "Sounds good to me.",
        "110": "That's kooky!",
        "120": "Awesome!",
        "130": "For crying out loud!",
        "140": "Don't worry.",
        "150": "Grrrr!",
        "160": "What's new?",
        "170": "Hey, hey, hey!",
        "180": "See you tomorrow.",
        "190": "See you next time.",
        "200": "See ya later, alligator.",
        "210": "After a while, crocodile.",
        "220": "I need to go soon.",
        "230": "I don't know about this!",
        "240": "You're outta here!",
        "250": "Ouch, that really smarts!",
        "260": "Gotcha!",
        "270": "Please!",
        "280": "Thanks a million!",
        "290": "You are stylin'!",
        "300": "Excuse me!",
        "310": "Can I help you?",
        "320": "That's what I'm talking about!",
        "330": "If you can't take the heat, stay out of the kitchen.",
        "340": "Well shiver me timbers!",
        "350": "Well isn't that special!",
        "360": "Quit horsing around!",
        "370": "Cat got your tongue?",
        "380": "You're in the dog house now!",
        "390": "Look what the cat dragged in.",
        "400": "I need to go see a Toon.",
        "410": "Don't have a cow!",
        "420": "Don't chicken out!",
        "430": "You're a sitting duck.",
        "440": "Whatever!",
        "450": "Totally!",
        "460": "Sweet!",
        "470": "That rules!",
        "480": "Yeah, baby!",
        "490": "Catch me if you can!",
        "500": "You need to heal first.",
        "510": "You need more Laff Points.",
        "520": "I'll be back in a minute.",
        "530": "I'm hungry.",
        "540": "Yeah, right!",
        "550": "I'm sleepy.",
        "560": "I'm ready!",
        "570": "I'm bored.",
        "580": "I love it!",
        "590": "That was exciting!",
        "600": "Jump!",
        "610": "Got gags?",
        "620": "What's wrong?",
        "630": "Easy does it.",
        "640": "Slow and steady wins the race.",
        "650": "Touchdown!",
        "660": "Ready?",
        "670": "Set!",
        "680": "Go!",
        "690": "Let's go this way!",
        "700": "You won!",
        "710": "I vote yes.",
        "720": "I vote no.",
        "730": "Count me in.",
        "740": "Count me out.",
        "750": "Stay here, I'll be back.",
        "760": "That was quick!",
        "770": "Did you see that?",
        "780": "What's that smell?",
        "790": "That stinks!",
        "800": "I don't care.",
        "810": "Just what the doctor ordered.",
        "820": "Let's get this party started!",
        "830": "This way everybody!",
        "840": "What in the world?",
        "850": "The check's in the mail.",
        "860": "I heard that!",
        "870": "Are you talking to me?",
        "880": "Thank you, I'll be here all week.",
        "890": "Hmm.",
        "900": "I'll get this one.",
        "910": "I got it!",
        "920": "It's mine!",
        "930": "Please, take it.",
        "940": "Stand back, this could be dangerous.",
        "950": "No worries!",
        "960": "Oh, my!",
        "970": "Whew!",
        "980": "Owoooo!",
        "990": "All Aboard!",
        "1000": "Hot Diggity Dog!",
        "1010": "Curiosity killed the cat.",
        "2000": "Act your age!",
        "2010": "Am I glad to see you!",
        "2020": "Be my guest.",
        "2030": "Been keeping out of trouble?",
        "2040": "Better late than never!",
        "2050": "Bravo!",
        "2060": "But seriously, folks...",
        "2070": "Care to join us?",
        "2080": "Catch you later!",
        "2090": "Changed your mind?",
        "2100": "Come and get it!",
        "2110": "Dear me!",
        "2120": "Delighted to make your acquaintance.",
        "2130": "Don't do anything I wouldn't do!",
        "2140": "Don't even think about it!",
        "2150": "Don't give up the ship!",
        "2160": "Don't hold your breath.",
        "2170": "Don't ask.",
        "2180": "Easy for you to say.",
        "2190": "Enough is enough!",
        "2200": "Excellent!",
        "2210": "Fancy meeting you here!",
        "2220": "Give me a break.",
        "2230": "Glad to hear it.",
        "2240": "Go ahead, make my day!",
        "2250": "Go for it!",
        "2260": "Good job!",
        "2270": "Good to see you!",
        "2280": "Got to get moving.",
        "2290": "Got to hit the road.",
        "2300": "Hang in there.",
        "2310": "Hang on a second.",
        "2320": "Have a ball!",
        "2330": "Have fun!",
        "2340": "Haven't got all day!",
        "2350": "Hold your horses!",
        "2360": "Horsefeathers!",
        "2370": "I don't believe this!",
        "2380": "I doubt it.",
        "2390": "I owe you one.",
        "2400": "I read you loud and clear.",
        "2410": "I think so.",
        "2420": "I think you should pass.",
        "2430": "I wish I'd said that.",
        "2440": "I wouldn't if I were you.",
        "2450": "I'd be happy to!",
        "2460": "I'm helping my friend.",
        "2470": "I'm here all week.",
        "2480": "Imagine that!",
        "2490": "In the nick of time...",
        "2500": "It's not over 'til it's over.",
        "2510": "Just thinking out loud.",
        "2520": "Keep in touch.",
        "2530": "Lovely weather for ducks!",
        "2540": "Make it snappy!",
        "2550": "Make yourself at home.",
        "2560": "Maybe some other time.",
        "2570": "Mind if I join you?",
        "2580": "Nice place you have here.",
        "2590": "Nice talking to you.",
        "2600": "No doubt about it.",
        "2610": "No kidding!",
        "2620": "Not by a long shot.",
        "2630": "Of all the nerve!",
        "2640": "Okay by me.",
        "2650": "Righto.",
        "2660": "Say cheese!",
        "2670": "Say what?",
        "2680": "Tah-dah!",
        "2690": "Take it easy.",
        "2700": "Ta-ta for now!",
        "2710": "Thanks, but no thanks.",
        "2720": "That takes the cake!",
        "2730": "That's funny.",
        "2740": "That's the ticket!",
        "2750": "There's a Cog invasion!",
        "2760": "Toodles.",
        "2770": "Watch out!",
        "2780": "Well done!",
        "2790": "What's cooking?",
        "2800": "What's happening?",
        "2810": "Works for me.",
        "2820": "Yes sirree.",
        "2830": "You betcha.",
        "2840": "You do the math.",
        "2850": "You leaving so soon?",
        "2860": "You make me laugh!",
        "2870": "You take right.",
        "2880": "You're going down!",
        "3000": "Anything you say.",
        "3010": "Care if I join you?",
        "3020": "Check, please.",
        "3030": "Don't be too sure.",
        "3040": "Don't mind if I do.",
        "3050": "Don't sweat it!",
        "3060": "Don't you know it!",
        "3070": "Don't mind me.",
        "3080": "Eureka!",
        "3090": "Fancy that!",
        "3100": "Forget about it!",
        "3110": "Going my way?",
        "3120": "Good for you!",
        "3130": "Good grief.",
        "3140": "Have a good one!",
        "3150": "Heads up!",
        "3160": "Here we go again.",
        "3170": "How about that!",
        "3180": "How do you like that?",
        "3190": "I believe so.",
        "3200": "I think not.",
        "3210": "I'll get back to you.",
        "3220": "I'm all ears.",
        "3230": "I'm busy.",
        "3240": "I'm not kidding!",
        "3250": "I'm speechless.",
        "3260": "Keep smiling.",
        "3270": "Let me know!",
        "3280": "Let the pie fly!",
        "3290": "Likewise, I'm sure.",
        "3300": "Look alive!",
        "3310": "My, how time flies.",
        "3320": "No comment.",
        "3330": "Now you're talking!",
        "3340": "Okay by me.",
        "3350": "Pleased to meet you.",
        "3360": "Righto.",
        "3370": "Sure thing.",
        "3380": "Thanks a million.",
        "3390": "That's more like it.",
        "3400": "That's the stuff!",
        "3410": "Time for me to hit the hay.",
        "3420": "Trust me!",
        "3430": "Until next time.",
        "3440": "Wait up!",
        "3450": "Way to go!",
        "3460": "What brings you here?",
        "3470": "What happened?",
        "3480": "What now?",
        "3490": "You first.",
        "3500": "You take left.",
        "3510": "You wish!",
        "3520": "You're toast!",
        "3530": "You're too much!",
        "4000": "Toons rule!",
        "4010": "Cogs drool!",
        "4020": "Toons of the world unite!",
        "4030": "Howdy, partner!",
        "4040": "Much obliged.",
        "4050": "Get along, little doggie.",
        "4060": "I'm going to hit the hay.",
        "4070": "I'm chomping at the bit!",
        "4080": "This town isn't big enough for the two of us!",
        "4090": "Saddle up!",
        "4100": "Draw!!!",
        "4110": "There's gold in them there hills!",
        "4120": "Happy trails!",
        "4130": "This is where I ride off into the sunset...",
        "4140": "Let's skedaddle!",
        "4150": "You got a bee in your bonnet?",
        "4160": "Lands sake!",
        "4170": "Right as rain.",
        "4180": "I reckon so.",
        "4190": "Let's ride!",
        "4200": "Well, go figure!",
        "4210": "I'm back in the saddle again!",
        "4220": "Round up the usual suspects.",
        "4230": "Giddyup!",
        "4240": "Reach for the sky.",
        "4250": "I'm fixing to.",
        "4260": "Hold your horses!",
        "4270": "I can't hit the broad side of a barn.",
        "4280": "Y'all come back now.",
        "4290": "It's a real barn burner!",
        "4300": "Don't be a yellow belly.",
        "4310": "Feeling lucky?",
        "4320": "What in Sam Hill's goin' on here?",
        "4330": "Shake your tail feathers!",
        "4340": "Well, don't that take all.",
        "4350": "That's a sight for sore eyes!",
        "4360": "Pickins is mighty slim around here.",
        "4370": "Take a load off.",
        "4380": "Aren't you a sight!",
        "4390": "That'll learn ya!",
        "6000": "I want candy!",
        "6010": "I've got a sweet tooth.",
        "6020": "That's half-baked.",
        "6030": "Just like taking candy from a baby!",
        "6040": "They're cheaper by the dozen.",
        "6050": "Let them eat cake!",
        "6060": "That's the icing on the cake.",
        "6070": "You can't have your cake and eat it too.",
        "6080": "I feel like a kid in a candy store.",
        "6090": "Six of one, half a dozen of the other...",
        "6100": "Let's keep it short and sweet.",
        "6110": "Keep your eye on the doughnut not the hole.",
        "6120": "That's pie in the sky.",
        "6130": "But it's wafer thin.",
        "6140": "Let's gum up the works!",
        "6150": "You're one tough cookie!",
        "6160": "That's the way the cookie crumbles.",
        "6170": "Like water for chocolate.",
        "6180": "Are you trying to sweet talk me?",
        "6190": "A spoonful of sugar helps the medicine go down.",
        "6200": "You are what you eat!",
        "6210": "Easy as pie!",
        "6220": "Don't be a sucker!",
        "6230": "Sugar and spice and everything nice.",
        "6240": "It's like butter!",
        "6250": "The candyman can!",
        "6260": "We all scream for ice cream!",
        "6270": "Let's not sugar coat it.",
        "6280": "Knock knock...",
        "6290": "Who's there?",
        "7000": "Quit monkeying around!",
        "7010": "That really throws a monkey-wrench in things.",
        "7020": "Monkey see, monkey do.",
        "7030": "They made a monkey out of you.",
        "7040": "That sounds like monkey business.",
        "7050": "I'm just monkeying with you.",
        "7060": "Who's gonna be monkey in the middle?",
        "7070": "That's a monkey off my back...",
        "7080": "This is more fun than a barrel of monkeys!",
        "7090": "Well I'll be a monkey's uncle.",
        "7100": "I've got monkeys on the brain.",
        "7110": "What's with the monkey suit?",
        "7120": "Hear no evil.",
        "7130": "See no evil.",
        "7140": "Speak no evil.",
        "7150": "Let's make like a banana and split.",
        "7160": "It's a jungle out there.",
        "7170": "You're the top banana.",
        "7180": "Cool bananas!",
        "7190": "I'm going bananas!",
        "7200": "Let's get into the swing of things!",
        "7210": "This place is swinging!",
        "7220": "I'm dying on the vine.",
        "7230": "Let's make like a tree and leave.",
        "7240": "Jellybeans don't grow on trees!",
        "10000": "This place is a ghost town.",
        "10001": "Nice costume!",
        "10002": "I think this place is haunted.",
        "10003": "Trick or Treat!",
        "10004": "Boo!",
        "10005": "Happy Haunting!",
        "10006": "Happy Halloween!",
        "10007": "It's time for me to turn into a pumpkin.",
        "10008": "Spooktastic!",
        "10009": "Spooky!",
        "10010": "That's creepy!",
        "10011": "I hate spiders!",
        "10012": "Did you hear that?",
        "10013": "You don't have a ghost of a chance!",
        "10014": "You scared me!",
        "10015": "That's spooky!",
        "10016": "That's freaky!",
        "10017": "That was strange....",
        "10018": "Skeletons in your closet?",
        "10019": "Did I scare you?",
        "11000": "Bah! Humbug!",
        "11001": "Better not pout!",
        "11002": "Brrr!",
        "11003": "Chill out!",
        "11004": "Come and get it!",
        "11005": "Don't be a turkey.",
        "11006": "Gobble gobble!",
        "11007": "Happy holidays!",
        "11008": "Happy New Year!",
        "11009": "Happy Thanksgiving!",
        "11010": "Happy Turkey Day!",
        "11011": "Ho! Ho! Ho!",
        "11012": "It's \"snow\" problem.",
        "11013": "It's \"snow\" wonder.",
        "11014": "Let it snow!",
        "11015": "Rake 'em in.",
        "11016": "Season's greetings!",
        "11017": "Snow doubt about it!",
        "11018": "Snow far, snow good!",
        "11019": "Yule be sorry!",
        "11020": "Have a Wonderful Winter!",
        "11021": "The Holiday Party decorations are Toontastic!",
        "11022": "Toon Troopers are hosting Holiday Parties!",
        "12000": "Be mine!",
        "12001": "Be my sweetie!",
        "12002": "Happy ValenToon's Day!",
        "12003": "Aww, how cute.",
        "12004": "I'm sweet on you.",
        "12005": "It's puppy love.",
        "12006": "Love ya!",
        "12007": "Will you be my ValenToon?",
        "12008": "You are a sweetheart.",
        "12009": "You are as sweet as pie.",
        "12010": "You are cute.",
        "12011": "You need a hug.",
        "12012": "Lovely!",
        "12013": "That's darling!",
        "12014": "Roses are red...",
        "12015": "Violets are blue...",
        "12016": "That's sweet!",
        "12050": "I LOVE busting Cogs!",
        "12051": "You're dynamite!",
        "12052": "I only have hypno-eyes for you!",
        "12053": "You're sweeter than a jellybean!",
        "12054": "I'd LOVE for you to come to my ValenToon's party!",
        "13000": "Top o' the mornin' to you!",
        "13001": "Happy St. Patrick's Day!",
        "13002": "You're not wearing green!",
        "13003": "It's the luck of the Irish.",
        "13004": "I'm green with envy.",
        "13005": "You lucky dog!",
        "13006": "You're my four leaf clover!",
        "13007": "You're my lucky charm!",
        "14000": "Let's have a summer Estate party!",
        "14001": "It's party time!",
        "14002": "Last one in the pond is a rotten Cog!",
        "14003": "Group Doodle training time!",
        "14004": "Doodle training time!",
        "14005": "Your Doodle is cool!",
        "14006": "What tricks can your Doodle do?",
        "14007": "Time for Cannon Pinball!",
        "14008": "Cannon Pinball rocks!",
        "14009": "Your Estate rocks!",
        "14010": "Your Garden is cool!",
        "14011": "Your Estate is cool!",
        "14012": "I don't have anyone to call for help",
        "14013": "I like your style.",
        "14014": "Send in a bug report"
      }
  var wordList = getRandomSubarray(Object.values(jsonData), 10);
  var pause = [1000, 4500];
  var terminalStarter = "> <span style='color: #5cd400;'> mting314@blog:</span><span style='color: #1c39c7;'>~</span>$ ";
  var current_datetime = new Date();
  var formatted_date = current_datetime.getFullYear() + "-" + appendLeadingZeroes(current_datetime.getMonth() + 1) + "-" + appendLeadingZeroes(current_datetime.getDate()) + " " + appendLeadingZeroes(current_datetime.getHours()) + ":" + appendLeadingZeroes(current_datetime.getMinutes()) + ":" + appendLeadingZeroes(current_datetime.getSeconds());

  var randomDelay = function(){
   return Math.random() * (pause[1] - pause[0] + pause[0]);
  };
  var typewriter = new Typewriter(app, {
    loop: false,
    delay: 'natural',
    cursor: '▌'
  });

  typewriter
  .pasteString(terminalStarter +"["+formatted_date+"]")
  .pauseFor(1000);

  if(current_datetime.getHours() > 22 ||current_datetime.getHours() < 5){
    typewriter
    .changeDelay(50)
    .pasteString("<br /> " +terminalStarter)
    .typeString("What are you doing up late? :)")
    .pauseFor(randomDelay());
  };

  if((current_datetime.getMonth() + 1) == 6 && current_datetime.getDate() == 9){
    typewriter
    .changeDelay(50)
    .pasteString("<br /> " +terminalStarter)
    .typeString("It's my birthday today! 🎂🎉")
    .pauseFor(randomDelay());    
  };

  console.log("aolsikfhjalskfhj");
  typewriter
  .changeDelay(90)
  .pasteString("<br /> " +terminalStarter)
  .pauseFor(1200)
  .typeString("Hey!")
  .pauseFor(800)
  .typeString(" I'm <strong>Michael</strong>")
  .pauseFor(1000)
  .pasteString("<br /> " + terminalStarter)
  .typeString(" I can only use SpeedChat.")
  .pauseFor(1000)
  .pasteString("<br /> " + terminalStarter)
  .typeString(" SpeedChat: ")
  ;

  let toType;
  for(var k = 0; k < totalLoops; k++){ 
    for(var i=0; i < wordList.length; i++){
      toType = wordList[parseInt(Math.random() * wordList.length)]
      typewriter
      .typeString(toType)
      .pauseFor(randomDelay())
      .deleteChars(strip(toType).length);
    };
  };
  typewriter.start();
};

var startTypers = function(){
  /*if(!blogTyperStarted){  startBlogTyper() }; */
  startBlogTyper();
  
};

var linesAdded = false;
var codeLinesSpan = "<span class='code-lines' style='display: none;'> </span>";
var codeLinesBtn = "<span class='code-lines-btn icon-list-numbered'></span>";
var codeLanguageTag = "<span class='code-language-tag'></span>";
var codeOutputTag = "<span class='code-output-tag icon-enlarge2'></span>";
var codeOutputMinHeight = "3rem";
var codeExtrasSpan = "<span class='code-extras'></span>";
var charLength = 0.8+0.1;
var addCodeLines = function(){
  console.log(linesAdded);
  if(linesAdded){
    return;
  }
  linesAdded = true;
  $(".highlight").each(function(index){
    if($(this).find(".code-lines").length > 0){
      return;
    };
    if($(this).parents(".highlight").length > 0){ /*We only want the most external one */
      return;
    };
    var code = $(this).find("code");
    var languageClass = code.attr('class');
    if(!languageClass){
      languageClass = $($(this).parents(".highlighter-rouge")[0]).attr('class');
    };
    var language = languageClass.split("-")[1].split(" ")[0].trim();
    var codeExtras = $(codeExtrasSpan);
      var languageTag = $(codeLanguageTag);
    if(language === 'plaintext'){
      languageTag.text("output");
      codeExtras.prepend(languageTag);
      $(this).addClass("code-output");
      var outputTag = $(codeOutputTag);
      code.parent().css("max-height", codeOutputMinHeight);
      outputTag.click(function(){
          var par = $(this).parent().parent();
          par.toggleClass("expanded");
        if( $(this).hasClass("enabled")){
          par.find("code").parent().css('max-height', codeOutputMinHeight);
        }
        else{   
          par.find("code").parent().css('max-height', '');
        };
        $(this).toggleClass("enabled");
      });
      codeExtras.prepend(outputTag);    
    }
    else{
      languageTag.text(language);
      codeExtras.prepend(languageTag);
      var noLines = code.text().trim().split(/\r\n|\r|\n/).length;
      if(noLines > 5){
        var linesSpan = $(codeLinesSpan);
        linesSpan.attr("code-lines", noLines);
        var linesBtnSpan = $(codeLinesBtn);
        linesBtnSpan.click(function(){
          if( $(this).hasClass("enabled")){
            var par = $(this).parent().parent();
            var codeLines = par.find(".code-lines");
            par.find("code").parent().css("padding-left", "");
            codeLines.css('opacity', '0');
            codeLines.css('display', 'none');
          }
          else{   
            var par = $(this).parent().parent();
            var codeLines = par.find(".code-lines");
            var padding = Math.max(2,codeLines.attr("code-lines").length)+"rem";
            par.find("code").parent().css("padding-left", padding);
            codeLines.css('display', '');
            codeLines.css('opacity', '1');
          };
          $(this).toggleClass("enabled");
        });
        linesSpan.text([...Array(noLines).keys()].join("\n"));
        $(this).prepend(linesSpan);
        codeExtras.prepend(linesBtnSpan);
      };
    };
    $(this).prepend(codeExtras);
    $(this).addClass("code-extended");
  });
};


document.getElementById('_pushState').addEventListener('hy-push-state-load', function() {
    startTypers();
    addCodeLines();
});


document.getElementById('_pushState').addEventListener('hy-push-state-start', function() {
  linesAdded = false;
});
document.addEventListener('DOMContentLoaded', function(){ 
    startTypers();
}, false);
</script>
  
  <script>!function(w, d) {
    w.ga=w.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;

    /**/
      ga('create', 'UA-145580315-1', 'auto');
    /**/

    var pushStateEl = d.getElementById('_pushState');
    var timeoutId;
    pushStateEl.addEventListener('hy-push-state-load', function() {
      w.clearTimeout(timeoutId);
      timeoutId = w.setTimeout(function() {
        ga('set', 'page', w.location.pathname);
        ga('send', 'pageview');
      }, 500);
    });

    d.addEventListener('hy--cookies-ok', function () {
      w.ga(function(tracker) {
        w.ga("set", "anonymizeIp", undefined);
        localStorage && localStorage.setItem("ga--client-id", tracker.get("clientId"));
      });
    });

    w.loadJSDeferred('https://www.google-analytics.com/analytics.js');
  }(window, document);</script>


  <script type="module">
    if ('serviceWorker' in navigator) {
      /**/
      navigator.serviceWorker.register('/sw.js')
        .then(r => r.update())
        .catch(() => {});
      /**/
    }
  </script>
<!--<![endif]-->
  <!-- <script>
  document.querySelector('hy-push-state').setAttribute('prefetch', '');

  document.querySelectorAll('.sidebar a[href^="/"]').forEach(function (el) { 
    el.addEventListener('click', function (e) {
      if (el.pathname === window.location.pathname) {
        e.preventDefault();
        e.stopPropagation();
        document.querySelector('hy-drawer').close();
      }
    });
  });
</script> -->

<!--
Code for integrating CloudFlare's email protection with Hydejack's single page app loading.
-->
<script>
  document.getElementById('_pushState').addEventListener('hy-push-state-after', function (e) {
    function e(e){
      (console.error?console.error:console.log).call(console,e)
    }

    function t(e){
      return l.innerHTML='<a href="'+e.replace(/"/g,"&quot;")+'"></a>',l.childNodes[0].getAttribute("href")
    }

    function r(e,t){
      var r=e.substr(t,2);return parseInt(r,16)
    }

    function n(e,n){
      for(var o="",c=r(e,n),a=n+2;a<e.length;a+=2){
        var l=r(e,a)^c;
        o+=String.fromCharCode(l)
      }
      return t(o)
    }

    var o="/cdn-cgi/l/email-protection#",
        c=".__cf_email__",
        a="data-cfemail",
        l=document.createElement("div");

    !function(){
      for(var t=document.getElementsByTagName("a"),r=0;r<t.length;r++)
        try{
          var c=t[r],a=c.href.indexOf(o);
          a>-1&&(c.href="mailto:"+n(c.href,a+o.length))
        }catch(t){
          e(t)
        }
    }(),
    function(){
      for(var t=document.querySelectorAll(c),r=0;r<t.length;r++)
        try{
          var o=t[r],l=n(o.getAttribute(a),0),i=document.createTextNode(l);
          o.parentNode.replaceChild(i,o)
        }catch(t){
          e(t)
        }
    }()
  });
</script>





<div hidden>
  
  <h2 class="sr-only">Templates (for web app):</h2>

  <template id="_animation-template">
  <div class="animation-main fixed-top">
    <div class="content">
      <div class="page"></div>
    </div>
  </div>
</template>

  <template id="_loading-template">
  <div class="loading nav-btn fr">
    <span class="sr-only">Loading…</span>
    <span class="icon-cog"></span>
  </div>
</template>

  <template id="_error-template">
  <div class="page">
    <h1 class="page-title">Error</h1>
    
    
    <p class="lead">
      Sorry, an error occurred while loading <a class="this-link" href=""></a>.

    </p>
  </div>
</template>

  <template id="_forward-template">
  <button id="_forward" class="forward nav-btn no-hover">
    <span class="sr-only">Forward</span>
    <span class="icon-arrow-right2"></span>
  </button>
</template>

  <template id="_back-template">
  <button id="_back" class="back nav-btn no-hover">
    <span class="sr-only">Back</span>
    <span class="icon-arrow-left2"></span>
  </button>
</template>

  <template id="_permalink-template">
  <a href="#" class="permalink">
    <span class="sr-only">Permalink</span>
    <span class="content-hash"></span>
  </a>
</template>

  
  
    <template id="_dark-mode-template">
  <button id="_dark-mode" class="nav-btn no-hover" >
    <span class="sr-only">Dark Mode</span>
    <span class="icon-brightness-contrast"></span>
  </button>
</template>

  
  
    <template id="_search-template">
  <button id="_search" class="nav-btn no-hover">
    <label class="sr-only" for="_search-input">Search</label>
    <span class="icon-search"></span>
  </button>
  <div id="_search-box">
    <div class="nav-btn">
      <span class="icon-search"></span>
    </div>
    <input 
      id="_search-input"
      type="search"
      class="form-control form-control-lg nav-btn"
      placeholder="SEARCH NOT ENABLED DURING DEVELOPMENT"
    />
    <button type="reset" class="nav-btn no-hover">
      <span class="sr-only">Close</span>
      <span class="icon-cross"></span>
    </button>
  </div>
  <div id="_hits"></div>
</template>

  
</div>

</body>
</html>
